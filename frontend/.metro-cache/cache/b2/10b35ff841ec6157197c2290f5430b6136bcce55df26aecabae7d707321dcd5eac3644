{"dependencies":[{"name":"./logging","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":20,"column":18,"index":722},"end":{"line":20,"column":38,"index":742}}],"key":"IuCQ7u+XFj9mcNQiMAuOpQn/EDM=","exportNames":["*"],"imports":1}},{"name":"./constants","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":21,"column":20,"index":764},"end":{"line":21,"column":42,"index":786}}],"key":"3z43bJyk/UB4EKjDCOXTFak09do=","exportNames":["*"],"imports":1}},{"name":"./error","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":22,"column":16,"index":804},"end":{"line":22,"column":34,"index":822}}],"key":"ABL1W5lBwNEqpjG9q/KVa7squiQ=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.Metadata=void 0;const t=r(d[0]),n=r(d[1]),o=r(d[2]),s=/^[0-9a-z_.-]+$/,f=/^[ -~]*$/;function c(t){return s.test(t)}function u(t){return f.test(t)}function h(t){return t.endsWith('-bin')}function l(t){return!t.startsWith('grpc-')}function p(t){return t.toLowerCase()}function R(t,n){if(!c(t))throw new Error('Metadata key \"'+t+'\" contains illegal characters');if(null!=n)if(h(t)){if(!Buffer.isBuffer(n))throw new Error(\"keys that end with '-bin' must have Buffer values\")}else{if(Buffer.isBuffer(n))throw new Error(\"keys that don't end with '-bin' must have String values\");if(!u(n))throw new Error('Metadata string value \"'+n+'\" contains illegal characters')}}class B{constructor(t={}){this.internalRepr=new Map,this.options=t}set(t,n){R(t=p(t),n),this.internalRepr.set(t,[n])}add(t,n){R(t=p(t),n);const o=this.internalRepr.get(t);void 0===o?this.internalRepr.set(t,[n]):o.push(n)}remove(t){t=p(t),this.internalRepr.delete(t)}get(t){return t=p(t),this.internalRepr.get(t)||[]}getMap(){const t={};for(const[n,o]of this.internalRepr)if(o.length>0){const s=o[0];t[n]=Buffer.isBuffer(s)?Buffer.from(s):s}return t}clone(){const t=new B(this.options),n=t.internalRepr;for(const[t,o]of this.internalRepr){const s=o.map(t=>Buffer.isBuffer(t)?Buffer.from(t):t);n.set(t,s)}return t}merge(t){for(const[n,o]of t.internalRepr){const t=(this.internalRepr.get(n)||[]).concat(o);this.internalRepr.set(n,t)}}setOptions(t){this.options=t}getOptions(){return this.options}toHttp2Headers(){const t={};for(const[n,o]of this.internalRepr)t[n]=o.map(w);return t}toJSON(){const t={};for(const[n,o]of this.internalRepr)t[n]=o;return t}static fromHttp2Headers(s){const f=new B;for(const c of Object.keys(s)){if(':'===c.charAt(0))continue;const u=s[c];try{h(c)?Array.isArray(u)?u.forEach(t=>{f.add(c,Buffer.from(t,'base64'))}):void 0!==u&&(l(c)?u.split(',').forEach(t=>{f.add(c,Buffer.from(t.trim(),'base64'))}):f.add(c,Buffer.from(u,'base64'))):Array.isArray(u)?u.forEach(t=>{f.add(c,t)}):void 0!==u&&f.add(c,u)}catch(s){const f=`Failed to add metadata entry ${c}: ${u}. ${(0,o.getErrorMessage)(s)}. For more information see https://github.com/grpc/grpc-node/issues/1173`;(0,t.log)(n.LogVerbosity.ERROR,f)}}return f}}e.Metadata=B;const w=t=>Buffer.isBuffer(t)?t.toString('base64'):t});","lineCount":1,"map":[[1,28,1,0],[1,41,18,0,"Object"],[1,48,18,7,"defineProperty"],[1,63,18,22,"exports"],[1,65,18,31],[1,78,18,45],[1,79,18,47,"value"],[1,86,18,54],[1,90,19,0,"exports"],[1,92,19,8,"Metadata"],[1,106,19,16,"undefined"],[1,108,20,0],[1,114,20,6,"logging_1"],[1,116,20,18,"require"],[1,118,20,25,"d"],[1,120,20,25],[1,124,21,6,"constants_1"],[1,126,21,20,"require"],[1,128,21,27,"d"],[1,130,21,27],[1,134,22,6,"error_1"],[1,136,22,16,"require"],[1,138,22,23,"d"],[1,140,22,23],[1,144,23,6,"LEGAL_KEY_REGEX"],[1,146,23,24],[1,163,24,6,"LEGAL_NON_BINARY_VALUE_REGEX"],[1,165,24,37],[1,176,25,0],[1,185,25,9,"isLegalKey"],[1,187,25,20,"key"],[1,190,26,4],[1,197,26,11,"LEGAL_KEY_REGEX"],[1,199,26,27,"test"],[1,204,26,32,"key"],[1,206,27,0],[1,207,28,0],[1,216,28,9,"isLegalNonBinaryValue"],[1,218,28,31,"value"],[1,221,29,4],[1,228,29,11,"LEGAL_NON_BINARY_VALUE_REGEX"],[1,230,29,40,"test"],[1,235,29,45,"value"],[1,237,30,0],[1,238,31,0],[1,247,31,9,"isBinaryKey"],[1,249,31,21,"key"],[1,252,32,4],[1,259,32,11,"key"],[1,261,32,15,"endsWith"],[1,270,32,24],[1,277,33,0],[1,278,34,0],[1,287,34,9,"isCustomMetadata"],[1,289,34,26,"key"],[1,292,35,4],[1,299,35,12,"key"],[1,301,35,16,"startsWith"],[1,312,35,27],[1,320,36,0],[1,321,37,0],[1,330,37,9,"normalizeKey"],[1,332,37,22,"key"],[1,335,38,4],[1,342,38,11,"key"],[1,344,38,15,"toLowerCase"],[1,357,39,0],[1,358,40,0],[1,367,40,9,"validate"],[1,369,40,18,"key"],[1,371,40,23,"value"],[1,374,41,4],[1,378,41,9,"isLegalKey"],[1,380,41,20,"key"],[1,383,42,8],[1,389,42,14],[1,393,42,18,"Error"],[1,399,42,24],[1,416,42,43,"key"],[1,418,42,49],[1,451,44,4],[1,454,44,8,"value"],[1,462,45,8],[1,465,45,12,"isBinaryKey"],[1,467,45,24,"key"],[1,471,46,12],[1,475,46,17,"Buffer"],[1,482,46,24,"isBuffer"],[1,491,46,33,"value"],[1,494,47,16],[1,500,47,22],[1,504,47,26,"Error"],[1,510,47,32],[1,567,50,13],[1,568,51,12],[1,571,51,16,"Buffer"],[1,578,51,23,"isBuffer"],[1,587,51,32,"value"],[1,590,52,16],[1,596,52,22],[1,600,52,26,"Error"],[1,606,52,32],[1,665,54,12],[1,669,54,17,"isLegalNonBinaryValue"],[1,671,54,39,"value"],[1,674,55,16],[1,680,55,22],[1,684,55,26,"Error"],[1,690,55,32],[1,716,55,60,"value"],[1,718,55,68],[1,750,57,8],[1,751,59,0],[1,752,63,0],[1,758,63,6,"Metadata"],[1,760,64,4,"constructor"],[1,772,64,16,"options"],[1,774,64,26],[1,775,64,27],[1,778,65,8,"this"],[1,783,65,13,"internalRepr"],[1,796,65,28],[1,800,65,32,"Map"],[1,804,66,8,"this"],[1,809,66,13,"options"],[1,817,66,23,"options"],[1,818,67,4],[1,819,75,4,"set"],[1,823,75,8,"key"],[1,825,75,13,"value"],[1,828,77,8,"validate"],[1,830,76,8,"key"],[1,832,76,14,"normalizeKey"],[1,834,76,27,"key"],[1,837,77,22,"value"],[1,840,78,8,"this"],[1,845,78,13,"internalRepr"],[1,858,78,26,"set"],[1,862,78,30,"key"],[1,864,78,35],[1,865,78,36,"value"],[1,868,79,4],[1,869,87,4,"add"],[1,873,87,8,"key"],[1,875,87,13,"value"],[1,878,89,8,"validate"],[1,880,88,8,"key"],[1,882,88,14,"normalizeKey"],[1,884,88,27,"key"],[1,887,89,22,"value"],[1,890,90,8],[1,896,90,14,"existingValue"],[1,898,90,30,"this"],[1,903,90,35,"internalRepr"],[1,916,90,48,"get"],[1,920,90,52,"key"],[1,928,91,30,"undefined"],[1,932,91,12,"existingValue"],[1,934,92,12,"this"],[1,939,92,17,"internalRepr"],[1,952,92,30,"set"],[1,956,92,34,"key"],[1,958,92,39],[1,959,92,40,"value"],[1,963,95,12,"existingValue"],[1,965,95,26,"push"],[1,970,95,31,"value"],[1,972,97,4],[1,973,102,4,"remove"],[1,980,102,11,"key"],[1,983,103,8,"key"],[1,985,103,14,"normalizeKey"],[1,987,103,27,"key"],[1,990,105,8,"this"],[1,995,105,13,"internalRepr"],[1,1008,105,26,"delete"],[1,1015,105,33,"key"],[1,1017,106,4],[1,1018,112,4,"get"],[1,1022,112,8,"key"],[1,1025,115,8],[1,1032,113,8,"key"],[1,1034,113,14,"normalizeKey"],[1,1036,113,27,"key"],[1,1039,115,15,"this"],[1,1044,115,20,"internalRepr"],[1,1057,115,33,"get"],[1,1061,115,37,"key"],[1,1065,115,45],[1,1067,116,4],[1,1068,122,4,"getMap"],[1,1077,123,8],[1,1083,123,14,"result"],[1,1085,123,23],[1,1086,123,24],[1,1088,124,8],[1,1092,124,13],[1,1098,124,20,"key"],[1,1100,124,25,"values"],[1,1105,124,36,"this"],[1,1110,124,41,"internalRepr"],[1,1123,125,12],[1,1126,125,16,"values"],[1,1128,125,23,"length"],[1,1135,125,32],[1,1137,125,35],[1,1138,126,16],[1,1144,126,22,"v"],[1,1146,126,26,"values"],[1,1148,126,33],[1,1151,127,16,"result"],[1,1153,127,23,"key"],[1,1156,127,30,"Buffer"],[1,1163,127,37,"isBuffer"],[1,1172,127,46,"v"],[1,1175,127,51,"Buffer"],[1,1182,127,58,"from"],[1,1187,127,63,"v"],[1,1190,127,68,"v"],[1,1191,128,12],[1,1192,130,8],[1,1199,130,15,"result"],[1,1200,131,4],[1,1201,136,4,"clone"],[1,1209,137,8],[1,1215,137,14,"newMetadata"],[1,1217,137,28],[1,1221,137,32,"Metadata"],[1,1223,137,41,"this"],[1,1228,137,46,"options"],[1,1237,138,14,"newInternalRepr"],[1,1239,138,32,"newMetadata"],[1,1241,138,44,"internalRepr"],[1,1254,139,8],[1,1258,139,13],[1,1264,139,20,"key"],[1,1266,139,25,"value"],[1,1271,139,35,"this"],[1,1276,139,40,"internalRepr"],[1,1289,139,54],[1,1290,140,12],[1,1296,140,18,"clonedValue"],[1,1298,140,32,"value"],[1,1300,140,38,"map"],[1,1304,140,42,"v"],[1,1307,141,20,"Buffer"],[1,1314,141,27,"isBuffer"],[1,1323,141,36,"v"],[1,1326,142,27,"Buffer"],[1,1333,142,34,"from"],[1,1338,142,39,"v"],[1,1341,145,27,"v"],[1,1344,148,12,"newInternalRepr"],[1,1346,148,28,"set"],[1,1350,148,32,"key"],[1,1352,148,37,"clonedValue"],[1,1354,149,8],[1,1355,150,8],[1,1362,150,15,"newMetadata"],[1,1363,151,4],[1,1364,159,4,"merge"],[1,1370,159,10,"other"],[1,1373,160,8],[1,1377,160,13],[1,1383,160,20,"key"],[1,1385,160,25,"values"],[1,1390,160,36,"other"],[1,1392,160,42,"internalRepr"],[1,1405,160,56],[1,1406,161,12],[1,1412,161,18,"mergedValue"],[1,1415,161,33,"this"],[1,1420,161,38,"internalRepr"],[1,1433,161,51,"get"],[1,1437,161,55,"key"],[1,1441,161,63],[1,1445,161,67,"concat"],[1,1452,161,74,"values"],[1,1455,162,12,"this"],[1,1460,162,17,"internalRepr"],[1,1473,162,30,"set"],[1,1477,162,34,"key"],[1,1479,162,39,"mergedValue"],[1,1481,163,8],[1,1482,164,4],[1,1483,165,4,"setOptions"],[1,1494,165,15,"options"],[1,1497,166,8,"this"],[1,1502,166,13,"options"],[1,1510,166,23,"options"],[1,1511,167,4],[1,1512,168,4,"getOptions"],[1,1525,169,8],[1,1532,169,15,"this"],[1,1537,169,20,"options"],[1,1544,170,4],[1,1545,174,4,"toHttp2Headers"],[1,1562,176,8],[1,1568,176,14,"result"],[1,1570,176,23],[1,1571,176,24],[1,1573,177,8],[1,1577,177,13],[1,1583,177,20,"key"],[1,1585,177,25,"values"],[1,1590,177,36,"this"],[1,1595,177,41,"internalRepr"],[1,1608,180,12,"result"],[1,1610,180,19,"key"],[1,1613,180,26,"values"],[1,1615,180,33,"map"],[1,1619,180,37,"bufToString"],[1,1622,182,8],[1,1629,182,15,"result"],[1,1630,183,4],[1,1631,188,4,"toJSON"],[1,1640,189,8],[1,1646,189,14,"result"],[1,1648,189,23],[1,1649,189,24],[1,1651,190,8],[1,1655,190,13],[1,1661,190,20,"key"],[1,1663,190,25,"values"],[1,1668,190,36,"this"],[1,1673,190,41,"internalRepr"],[1,1686,191,12,"result"],[1,1688,191,19,"key"],[1,1691,191,26,"values"],[1,1693,193,8],[1,1700,193,15,"result"],[1,1701,194,4],[1,1702,200,4],[1,1725,200,11,"fromHttp2Headers"],[1,1726,200,28,"headers"],[1,1729,201,8],[1,1735,201,14,"result"],[1,1737,201,23],[1,1741,201,27,"Metadata"],[1,1743,202,8],[1,1747,202,13],[1,1753,202,19,"key"],[1,1758,202,26,"Object"],[1,1765,202,33,"keys"],[1,1770,202,38,"headers"],[1,1773,202,48],[1,1774,204,12],[1,1777,204,34],[1,1783,204,16,"key"],[1,1785,204,20,"charAt"],[1,1792,204,27],[1,1795,205,16],[1,1804,207,12],[1,1810,207,18,"values"],[1,1812,207,27,"headers"],[1,1814,207,35,"key"],[1,1817,208,12],[1,1821,209,20,"isBinaryKey"],[1,1823,209,32,"key"],[1,1826,210,24,"Array"],[1,1832,210,30,"isArray"],[1,1840,210,38,"values"],[1,1843,211,24,"values"],[1,1845,211,31,"forEach"],[1,1853,211,39,"value"],[1,1857,212,28,"result"],[1,1859,212,35,"add"],[1,1863,212,39,"key"],[1,1865,212,44,"Buffer"],[1,1872,212,51,"from"],[1,1877,212,56,"value"],[1,1879,212,63],[1,1897,215,40,"undefined"],[1,1901,215,29,"values"],[1,1905,216,28,"isCustomMetadata"],[1,1907,216,45,"key"],[1,1910,217,28,"values"],[1,1912,217,35,"split"],[1,1918,217,41],[1,1923,217,46,"forEach"],[1,1931,217,54,"v"],[1,1935,218,32,"result"],[1,1937,218,39,"add"],[1,1941,218,43,"key"],[1,1943,218,48,"Buffer"],[1,1950,218,55,"from"],[1,1955,218,60,"v"],[1,1957,218,62,"trim"],[1,1964,218,70],[1,1977,222,28,"result"],[1,1979,222,35,"add"],[1,1983,222,39,"key"],[1,1985,222,44,"Buffer"],[1,1992,222,51,"from"],[1,1997,222,56,"values"],[1,1999,222,64],[1,2011,227,24,"Array"],[1,2017,227,30,"isArray"],[1,2025,227,38,"values"],[1,2028,228,24,"values"],[1,2030,228,31,"forEach"],[1,2038,228,39,"value"],[1,2042,229,28,"result"],[1,2044,229,35,"add"],[1,2048,229,39,"key"],[1,2050,229,44,"value"],[1,2060,232,40,"undefined"],[1,2064,232,29,"values"],[1,2067,233,24,"result"],[1,2069,233,31,"add"],[1,2073,233,35,"key"],[1,2075,233,40,"values"],[1,2077,236,12],[1,2078,237,12],[1,2084,237,19,"error"],[1,2087,238,16],[1,2093,238,22,"message"],[1,2095,238,32],[1,2127,238,64,"key"],[1,2133,238,72,"values"],[1,2140,238,83],[1,2142,238,87,"error_1"],[1,2144,238,95,"getErrorMessage"],[1,2161,238,112,"error"],[1,2239,239,16],[1,2241,239,20,"logging_1"],[1,2243,239,30,"log"],[1,2248,239,35,"constants_1"],[1,2250,239,47,"LogVerbosity"],[1,2263,239,60,"ERROR"],[1,2269,239,67,"message"],[1,2271,240,12],[1,2272,241,8],[1,2273,242,8],[1,2280,242,15,"result"],[1,2281,243,4],[1,2283,245,0,"exports"],[1,2285,245,8,"Metadata"],[1,2294,245,19,"Metadata"],[1,2296,246,0],[1,2302,246,6,"bufToString"],[1,2304,246,21,"val"],[1,2307,247,11,"Buffer"],[1,2314,247,18,"isBuffer"],[1,2323,247,27,"val"],[1,2326,247,34,"val"],[1,2328,247,38,"toString"],[1,2337,247,47],[1,2347,247,59,"val"],[1,2348,248,2],[1,2351]],"functionMap":{"names":["<global>","isLegalKey","isLegalNonBinaryValue","isBinaryKey","isCustomMetadata","normalizeKey","validate","Metadata","Metadata#constructor","Metadata#set","Metadata#add","Metadata#remove","Metadata#get","Metadata#getMap","Metadata#clone","value.map$argument_0","Metadata#merge","Metadata#setOptions","Metadata#getOptions","Metadata#toHttp2Headers","Metadata#toJSON","Metadata.fromHttp2Headers","values.forEach$argument_0","values.split.forEach$argument_0","bufToString"],"mappings":"AAA;ACwB;CDE;AEC;CFE;AGC;CHE;AIC;CJE;AKC;CLE;AMC;CNmB;AOI;ICC;KDG;IEQ;KFI;IGQ;KHU;IIK;KJI;IKM;KLI;IMM;KNS;IOK;0CCI;aDO;KPI;ISQ;KTK;IUC;KVE;IWC;KXE;IYI;KZS;IaK;KbM;IcM;uCCW;yBDE;sDEI;6BFE;uCCS;yBDE;Kda;CPC;oBwBE;CxBE"},"hasCjsExports":true},"type":"js/module"}]}