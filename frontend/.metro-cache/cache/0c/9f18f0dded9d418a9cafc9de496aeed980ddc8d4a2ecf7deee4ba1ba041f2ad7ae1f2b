{"dependencies":[],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){\"use strict\";var s;Object.defineProperty(e,\"__esModule\",{value:!0}),e.StreamDecoder=void 0,(function(s){s[s.NO_DATA=0]=\"NO_DATA\",s[s.READING_SIZE=1]=\"READING_SIZE\",s[s.READING_MESSAGE=2]=\"READING_MESSAGE\"})(s||(s={}));e.StreamDecoder=class{constructor(t){this.maxReadMessageLength=t,this.readState=s.NO_DATA,this.readCompressFlag=Buffer.alloc(1),this.readPartialSize=Buffer.alloc(4),this.readSizeRemaining=4,this.readMessageSize=0,this.readPartialMessage=[],this.readMessageRemaining=0}write(t){let h,n=0;const S=[];for(;n<t.length;)switch(this.readState){case s.NO_DATA:this.readCompressFlag=t.slice(n,n+1),n+=1,this.readState=s.READING_SIZE,this.readPartialSize.fill(0),this.readSizeRemaining=4,this.readMessageSize=0,this.readMessageRemaining=0,this.readPartialMessage=[];break;case s.READING_SIZE:if(h=Math.min(t.length-n,this.readSizeRemaining),t.copy(this.readPartialSize,4-this.readSizeRemaining,n,n+h),this.readSizeRemaining-=h,n+=h,0===this.readSizeRemaining){if(this.readMessageSize=this.readPartialSize.readUInt32BE(0),-1!==this.maxReadMessageLength&&this.readMessageSize>this.maxReadMessageLength)throw new Error(`Received message larger than max (${this.readMessageSize} vs ${this.maxReadMessageLength})`);if(this.readMessageRemaining=this.readMessageSize,this.readMessageRemaining>0)this.readState=s.READING_MESSAGE;else{const t=Buffer.concat([this.readCompressFlag,this.readPartialSize],5);this.readState=s.NO_DATA,S.push(t)}}break;case s.READING_MESSAGE:if(h=Math.min(t.length-n,this.readMessageRemaining),this.readPartialMessage.push(t.slice(n,n+h)),this.readMessageRemaining-=h,n+=h,0===this.readMessageRemaining){const t=[this.readCompressFlag,this.readPartialSize].concat(this.readPartialMessage),h=Buffer.concat(t,this.readMessageSize+5);this.readState=s.NO_DATA,S.push(h)}break;default:throw new Error('Unexpected read state')}return S}}});","lineCount":1,"map":[[1,28,1,0],[1,41,20,0],[1,45,20,4,"ReadState"],[1,47,18,0,"Object"],[1,54,18,7,"defineProperty"],[1,69,18,22,"exports"],[1,71,18,31],[1,84,18,45],[1,85,18,47,"value"],[1,92,18,54],[1,96,19,0,"exports"],[1,98,19,8,"StreamDecoder"],[1,117,19,21,"undefined"],[1,120,21,0],[1,129,21,11,"ReadState"],[1,132,22,4,"ReadState"],[1,134,22,14,"ReadState"],[1,136,22,33],[1,144,22,37],[1,147,22,42],[1,157,23,4,"ReadState"],[1,159,23,14,"ReadState"],[1,161,23,38],[1,174,23,42],[1,177,23,47],[1,192,24,4,"ReadState"],[1,194,24,14,"ReadState"],[1,196,24,41],[1,212,24,45],[1,215,24,50],[1,232,25,1],[1,234,21,0],[1,235,25,3,"ReadState"],[1,239,25,17,"ReadState"],[1,241,25,29],[1,242,25,30],[1,246,99,0,"exports"],[1,248,99,8,"StreamDecoder"],[1,262,26,0],[1,268,27,4,"constructor"],[1,280,27,16,"maxReadMessageLength"],[1,283,28,8,"this"],[1,288,28,13,"maxReadMessageLength"],[1,309,28,36,"maxReadMessageLength"],[1,311,29,8,"this"],[1,316,29,13,"readState"],[1,326,29,25,"ReadState"],[1,328,29,35,"NO_DATA"],[1,336,30,8,"this"],[1,341,30,13,"readCompressFlag"],[1,358,30,32,"Buffer"],[1,365,30,39,"alloc"],[1,371,30,45],[1,374,31,8,"this"],[1,379,31,13,"readPartialSize"],[1,395,31,31,"Buffer"],[1,402,31,38,"alloc"],[1,408,31,44],[1,411,32,8,"this"],[1,416,32,13,"readSizeRemaining"],[1,434,32,33],[1,436,33,8,"this"],[1,441,33,13,"readMessageSize"],[1,457,33,31],[1,459,34,8,"this"],[1,464,34,13,"readPartialMessage"],[1,483,34,34],[1,486,35,8,"this"],[1,491,35,13,"readMessageRemaining"],[1,512,35,36],[1,513,36,4],[1,514,37,4,"write"],[1,520,37,10,"data"],[1,523,38,8],[1,527,39,12,"toRead"],[1,529,38,12,"readHead"],[1,531,38,23],[1,533,40,8],[1,539,40,14,"result"],[1,541,40,23],[1,544,41,8],[1,549,41,15,"readHead"],[1,551,41,26,"data"],[1,553,41,31,"length"],[1,561,42,12],[1,568,42,20,"this"],[1,573,42,25,"readState"],[1,584,43,16],[1,589,43,21,"ReadState"],[1,591,43,31,"NO_DATA"],[1,599,44,20,"this"],[1,604,44,25,"readCompressFlag"],[1,621,44,44,"data"],[1,623,44,49,"slice"],[1,629,44,55,"readHead"],[1,631,44,65,"readHead"],[1,633,44,76],[1,636,45,20,"readHead"],[1,639,45,32],[1,641,46,20,"this"],[1,646,46,25,"readState"],[1,656,46,37,"ReadState"],[1,658,46,47,"READING_SIZE"],[1,671,47,20,"this"],[1,676,47,25,"readPartialSize"],[1,692,47,41,"fill"],[1,697,47,46],[1,700,48,20,"this"],[1,705,48,25,"readSizeRemaining"],[1,723,48,45],[1,725,49,20,"this"],[1,730,49,25,"readMessageSize"],[1,746,49,43],[1,748,50,20,"this"],[1,753,50,25,"readMessageRemaining"],[1,774,50,48],[1,776,51,20,"this"],[1,781,51,25,"readPartialMessage"],[1,800,51,46],[1,803,52,20],[1,809,53,16],[1,814,53,21,"ReadState"],[1,816,53,31,"READING_SIZE"],[1,829,59,20],[1,832,54,20,"toRead"],[1,834,54,29,"Math"],[1,839,54,34,"min"],[1,843,54,38,"data"],[1,845,54,43,"length"],[1,852,54,52,"readHead"],[1,854,54,62,"this"],[1,859,54,67,"readSizeRemaining"],[1,878,55,20,"data"],[1,880,55,25,"copy"],[1,885,55,30,"this"],[1,890,55,35,"readPartialSize"],[1,906,55,52],[1,908,55,56,"this"],[1,913,55,61,"readSizeRemaining"],[1,931,55,80,"readHead"],[1,933,55,90,"readHead"],[1,935,55,101,"toRead"],[1,938,56,20,"this"],[1,943,56,25,"readSizeRemaining"],[1,962,56,46,"toRead"],[1,964,57,20,"readHead"],[1,967,57,32,"toRead"],[1,969,59,51],[1,973,59,24,"this"],[1,978,59,29,"readSizeRemaining"],[1,996,59,54],[1,997,61,24],[1,1000,60,24,"this"],[1,1005,60,29,"readMessageSize"],[1,1021,60,47,"this"],[1,1026,60,52,"readPartialSize"],[1,1042,60,68,"readUInt32BE"],[1,1055,60,81],[1,1059,61,53],[1,1063,61,28,"this"],[1,1068,61,33,"maxReadMessageLength"],[1,1090,61,64,"this"],[1,1095,61,69,"readMessageSize"],[1,1111,61,87,"this"],[1,1116,61,92,"maxReadMessageLength"],[1,1137,62,28],[1,1143,62,34],[1,1147,62,38,"Error"],[1,1153,62,44],[1,1190,62,81,"this"],[1,1195,62,86,"readMessageSize"],[1,1217,62,108,"this"],[1,1222,62,113,"maxReadMessageLength"],[1,1247,65,24],[1,1250,64,24,"this"],[1,1255,64,29,"readMessageRemaining"],[1,1276,64,52,"this"],[1,1281,64,57,"readMessageSize"],[1,1297,65,28,"this"],[1,1302,65,33,"readMessageRemaining"],[1,1323,65,56],[1,1325,66,28,"this"],[1,1330,66,33,"readState"],[1,1340,66,45,"ReadState"],[1,1342,66,55,"READING_MESSAGE"],[1,1362,68,29],[1,1363,69,28],[1,1369,69,34,"message"],[1,1371,69,44,"Buffer"],[1,1378,69,51,"concat"],[1,1385,69,58],[1,1386,69,59,"this"],[1,1391,69,64,"readCompressFlag"],[1,1408,69,82,"this"],[1,1413,69,87,"readPartialSize"],[1,1430,69,105],[1,1433,70,28,"this"],[1,1438,70,33,"readState"],[1,1448,70,45,"ReadState"],[1,1450,70,55,"NO_DATA"],[1,1458,71,28,"result"],[1,1460,71,35,"push"],[1,1465,71,40,"message"],[1,1467,72,24],[1,1468,73,20],[1,1469,74,20],[1,1475,75,16],[1,1480,75,21,"ReadState"],[1,1482,75,31,"READING_MESSAGE"],[1,1498,81,20],[1,1501,76,20,"toRead"],[1,1503,76,29,"Math"],[1,1508,76,34,"min"],[1,1512,76,38,"data"],[1,1514,76,43,"length"],[1,1521,76,52,"readHead"],[1,1523,76,62,"this"],[1,1528,76,67,"readMessageRemaining"],[1,1550,77,20,"this"],[1,1555,77,25,"readPartialMessage"],[1,1574,77,44,"push"],[1,1579,77,49,"data"],[1,1581,77,54,"slice"],[1,1587,77,60,"readHead"],[1,1589,77,70,"readHead"],[1,1591,77,81,"toRead"],[1,1595,78,20,"this"],[1,1600,78,25,"readMessageRemaining"],[1,1622,78,49,"toRead"],[1,1624,79,20,"readHead"],[1,1627,79,32,"toRead"],[1,1629,81,54],[1,1633,81,24,"this"],[1,1638,81,29,"readMessageRemaining"],[1,1659,81,57],[1,1660,83,24],[1,1666,83,30,"framedMessageBuffers"],[1,1668,83,53],[1,1669,84,28,"this"],[1,1674,84,33,"readCompressFlag"],[1,1691,85,28,"this"],[1,1696,85,33,"readPartialSize"],[1,1713,86,26,"concat"],[1,1720,86,33,"this"],[1,1725,86,38,"readPartialMessage"],[1,1745,87,30,"framedMessage"],[1,1747,87,46,"Buffer"],[1,1754,87,53,"concat"],[1,1761,87,60,"framedMessageBuffers"],[1,1763,87,82,"this"],[1,1768,87,87,"readMessageSize"],[1,1784,87,105],[1,1787,88,24,"this"],[1,1792,88,29,"readState"],[1,1802,88,41,"ReadState"],[1,1804,88,51,"NO_DATA"],[1,1812,89,24,"result"],[1,1814,89,31,"push"],[1,1819,89,36,"framedMessage"],[1,1821,90,20],[1,1822,91,20],[1,1828,92,16],[1,1836,93,20],[1,1842,93,26],[1,1846,93,30,"Error"],[1,1852,93,36],[1,1877,96,8],[1,1884,96,15,"result"],[1,1885,97,4],[1,1887,99,38],[1,1890]],"functionMap":{"names":["<global>","<anonymous>","StreamDecoder","StreamDecoder#constructor","StreamDecoder#write"],"mappings":"AAA;CCoB;CDI;AEC;ICC;KDS;IEC;KF4D;CFC"},"hasCjsExports":true},"type":"js/module"}]}