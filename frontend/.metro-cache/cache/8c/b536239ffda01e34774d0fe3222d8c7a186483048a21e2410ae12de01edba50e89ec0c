{"dependencies":[{"name":"./wrap-idb-value.cjs","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":5,"column":19,"index":98},"end":{"line":5,"column":50,"index":129}}],"key":"bJvH+b+nMCfa1L2b0vvAC8evhEw=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){'use strict';Object.defineProperty(e,'__esModule',{value:!0});var n=r(d[0]);const t=['get','getKey','getAll','getAllKeys','count'],o=['put','add','delete','clear'],s=new Map;function c(n,c){if(!(n instanceof IDBDatabase)||c in n||'string'!=typeof c)return;if(s.get(c))return s.get(c);const l=c.replace(/FromIndex$/,''),u=c!==l,p=o.includes(l);if(!(l in(u?IDBIndex:IDBObjectStore).prototype)||!p&&!t.includes(l))return;const w=async function(n,...t){const o=this.transaction(n,p?'readwrite':'readonly');let s=o.store;return u&&(s=s.index(t.shift())),(await Promise.all([s[l](...t),p&&o.done]))[0]};return s.set(c,w),w}n.replaceTraps(n=>({...n,get:(t,o,s)=>c(t,o)||n.get(t,o,s),has:(t,o)=>!!c(t,o)||n.has(t,o)})),e.unwrap=n.unwrap,e.wrap=n.wrap,e.deleteDB=function(t,{blocked:o}={}){const s=indexedDB.deleteDatabase(t);return o&&s.addEventListener('blocked',n=>o(n.oldVersion,n)),n.wrap(s).then(()=>{})},e.openDB=function(t,o,{blocked:s,upgrade:c,blocking:l,terminated:u}={}){const p=indexedDB.open(t,o),w=n.wrap(p);return c&&p.addEventListener('upgradeneeded',t=>{c(n.wrap(p.result),t.oldVersion,t.newVersion,n.wrap(p.transaction),t)}),s&&p.addEventListener('blocked',n=>s(n.oldVersion,n.newVersion,n)),w.then(n=>{u&&n.addEventListener('close',()=>u()),l&&n.addEventListener('versionchange',n=>l(n.oldVersion,n.newVersion,n))}).catch(()=>{}),w}});","lineCount":1,"map":[[1,28,1,0],[1,41,3,0,"Object"],[1,48,3,7,"defineProperty"],[1,63,3,22,"exports"],[1,65,3,31],[1,78,3,45],[1,79,3,47,"value"],[1,86,3,54],[1,90,5,0],[1,94,5,4,"wrapIdbValue"],[1,96,5,19,"require"],[1,98,5,26,"d"],[1,100,5,26],[1,104,53,0],[1,110,53,6,"readMethods"],[1,112,53,20],[1,113,53,21],[1,119,53,28],[1,128,53,38],[1,137,53,48],[1,150,53,62],[1,159,54,6,"writeMethods"],[1,161,54,21],[1,162,54,22],[1,168,54,29],[1,174,54,36],[1,183,54,46],[1,192,55,6,"cachedMethods"],[1,194,55,22],[1,198,55,26,"Map"],[1,202,56,0],[1,211,56,9,"getMethod"],[1,213,56,19,"target"],[1,215,56,27,"prop"],[1,218,57,4],[1,223,57,10,"target"],[1,236,57,28,"IDBDatabase"],[1,250,58,10,"prop"],[1,255,58,18,"target"],[1,258,59,24],[1,275,59,15,"prop"],[1,277,60,8],[1,284,62,4],[1,287,62,8,"cachedMethods"],[1,289,62,22,"get"],[1,293,62,26,"prop"],[1,296,63,8],[1,303,63,15,"cachedMethods"],[1,305,63,29,"get"],[1,309,63,33,"prop"],[1,312,64,4],[1,318,64,10,"targetFuncName"],[1,320,64,27,"prop"],[1,322,64,32,"replace"],[1,330,64,40],[1,343,64,54],[1,347,65,10,"useIndex"],[1,349,65,21,"prop"],[1,353,65,30,"targetFuncName"],[1,355,66,10,"isWrite"],[1,357,66,20,"writeMethods"],[1,359,66,33,"includes"],[1,368,66,42,"targetFuncName"],[1,371,67,4],[1,376,69,6,"targetFuncName"],[1,381,69,25,"useIndex"],[1,383,69,36,"IDBIndex"],[1,392,69,47,"IDBObjectStore"],[1,408,69,63,"prototype"],[1,421,70,10,"isWrite"],[1,425,70,21,"readMethods"],[1,427,70,33,"includes"],[1,436,70,42,"targetFuncName"],[1,439,71,8],[1,446,73,4],[1,452,73,10,"method"],[1,454,73,19,"async"],[1,469,73,35,"storeName"],[1,474,73,49,"args"],[1,477,75,8],[1,483,75,14,"tx"],[1,485,75,19,"this"],[1,490,75,24,"transaction"],[1,502,75,36,"storeName"],[1,504,75,47,"isWrite"],[1,506,75,57],[1,518,75,71],[1,530,76,8],[1,534,76,12,"target"],[1,536,76,21,"tx"],[1,538,76,24,"store"],[1,544,84,8],[1,551,77,12,"useIndex"],[1,555,78,12,"target"],[1,557,78,21,"target"],[1,559,78,28,"index"],[1,565,78,34,"args"],[1,567,78,39,"shift"],[1,584,84,22,"Promise"],[1,592,84,30,"all"],[1,596,84,34],[1,597,85,12,"target"],[1,599,85,19,"targetFuncName"],[1,605,85,38,"args"],[1,608,86,12,"isWrite"],[1,611,86,23,"tx"],[1,613,86,26,"done"],[1,621,87,12],[1,623,88,4],[1,625,90,4],[1,632,89,4,"cachedMethods"],[1,634,89,18,"set"],[1,638,89,22,"prop"],[1,640,89,28,"method"],[1,643,90,11,"method"],[1,644,91,0],[1,645,92,0,"wrapIdbValue"],[1,647,92,13,"replaceTraps"],[1,660,92,27,"oldTraps"],[1,664,92,35],[1,668,93,7,"oldTraps"],[1,670,94,4,"get"],[1,674,94,9,"get"],[1,675,94,10,"target"],[1,677,94,18,"prop"],[1,679,94,24,"receiver"],[1,683,94,37,"getMethod"],[1,685,94,47,"target"],[1,687,94,55,"prop"],[1,691,94,64,"oldTraps"],[1,693,94,73,"get"],[1,697,94,77,"target"],[1,699,94,85,"prop"],[1,701,94,91,"receiver"],[1,704,95,4,"has"],[1,708,95,9,"has"],[1,709,95,10,"target"],[1,711,95,18,"prop"],[1,717,95,29,"getMethod"],[1,719,95,39,"target"],[1,721,95,47,"prop"],[1,725,95,56,"oldTraps"],[1,727,95,65,"has"],[1,731,95,69,"target"],[1,733,95,77,"prop"],[1,739,98,0,"exports"],[1,741,98,8,"unwrap"],[1,748,98,17,"wrapIdbValue"],[1,750,98,30,"unwrap"],[1,757,99,0,"exports"],[1,759,99,8,"wrap"],[1,764,99,15,"wrapIdbValue"],[1,766,99,28,"wrap"],[1,771,100,0,"exports"],[1,773,100,8,"deleteDB"],[1,782,43,0],[1,791,43,18,"name"],[1,794,43,24,"blocked"],[1,802,43,26,"blocked"],[1,805,43,38],[1,806,43,39],[1,809,44,4],[1,815,44,10,"request"],[1,817,44,20,"indexedDB"],[1,827,44,30,"deleteDatabase"],[1,842,44,45,"name"],[1,845,50,4],[1,852,45,8,"blocked"],[1,855,46,8,"request"],[1,857,46,16,"addEventListener"],[1,874,46,33],[1,884,46,45,"event"],[1,887,46,55,"blocked"],[1,889,48,8,"event"],[1,891,48,14,"oldVersion"],[1,902,48,26,"event"],[1,906,50,11,"wrapIdbValue"],[1,908,50,24,"wrap"],[1,913,50,29,"request"],[1,916,50,38,"then"],[1,921,50,43],[1,928,51,0],[1,930,101,0,"exports"],[1,932,101,8,"openDB"],[1,939,14,0],[1,948,14,16,"name"],[1,950,14,22,"version"],[1,953,14,31,"blocked"],[1,961,14,33,"blocked"],[1,963,14,40,"upgrade"],[1,971,14,42,"upgrade"],[1,973,14,49,"blocking"],[1,982,14,51,"blocking"],[1,984,14,59,"terminated"],[1,995,14,61,"terminated"],[1,998,14,76],[1,999,14,77],[1,1002,15,4],[1,1008,15,10,"request"],[1,1010,15,20,"indexedDB"],[1,1020,15,30,"open"],[1,1025,15,35,"name"],[1,1027,15,41,"version"],[1,1030,16,10,"openPromise"],[1,1032,16,24,"wrapIdbValue"],[1,1034,16,37,"wrap"],[1,1039,16,42,"request"],[1,1042,36,4],[1,1049,17,8,"upgrade"],[1,1052,18,8,"request"],[1,1054,18,16,"addEventListener"],[1,1071,18,33],[1,1087,18,51,"event"],[1,1091,19,12,"upgrade"],[1,1093,19,20,"wrapIdbValue"],[1,1095,19,33,"wrap"],[1,1100,19,38,"request"],[1,1102,19,46,"result"],[1,1110,19,55,"event"],[1,1112,19,61,"oldVersion"],[1,1123,19,73,"event"],[1,1125,19,79,"newVersion"],[1,1136,19,91,"wrapIdbValue"],[1,1138,19,104,"wrap"],[1,1143,19,109,"request"],[1,1145,19,117,"transaction"],[1,1158,19,131,"event"],[1,1163,22,8,"blocked"],[1,1166,23,8,"request"],[1,1168,23,16,"addEventListener"],[1,1185,23,33],[1,1195,23,45,"event"],[1,1198,23,55,"blocked"],[1,1200,25,8,"event"],[1,1202,25,14,"oldVersion"],[1,1213,25,26,"event"],[1,1215,25,32,"newVersion"],[1,1226,25,44,"event"],[1,1230,27,4,"openPromise"],[1,1232,28,9,"then"],[1,1237,28,15,"db"],[1,1241,29,12,"terminated"],[1,1244,30,12,"db"],[1,1246,30,15,"addEventListener"],[1,1263,30,32],[1,1271,30,41],[1,1275,30,47,"terminated"],[1,1280,31,12,"blocking"],[1,1283,32,12,"db"],[1,1285,32,15,"addEventListener"],[1,1302,32,32],[1,1318,32,50,"event"],[1,1321,32,60,"blocking"],[1,1323,32,69,"event"],[1,1325,32,75,"oldVersion"],[1,1336,32,87,"event"],[1,1338,32,93,"newVersion"],[1,1349,32,105,"event"],[1,1355,35,9,"catch"],[1,1361,35,15],[1,1369,36,11,"openPromise"],[1,1370,37,0],[1,1371,101,24],[1,1374]],"functionMap":{"names":["<global>","openDB","request.addEventListener$argument_1","openPromise.then$argument_0","db.addEventListener$argument_1","openPromise.then._catch$argument_0","deleteDB","wrapIdbValue.wrap.then$argument_0","getMethod","method","wrapIdbValue.replaceTraps$argument_0","get","has"],"mappings":"AAA;ACa;kDCI;SDE;4CCG;kDDE;cEG;yCCE,kBD;iDCE,8DD;KFE;eIC,SJ;CDE;AMM;4CJG;gCIE;2CCE,eD;CNC;AQK;mBCiB;KDe;CRG;0BUC;SCE,2FD;SEC,yEF;EVC"},"hasCjsExports":true},"type":"js/module"}]}