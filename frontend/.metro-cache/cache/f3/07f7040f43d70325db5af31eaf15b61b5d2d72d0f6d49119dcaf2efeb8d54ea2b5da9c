{"dependencies":[{"name":"./channel-options","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":20,"column":26,"index":764},"end":{"line":20,"column":54,"index":792}}],"key":"1cJpQ91whmlI03qs01dziUmYuEw=","exportNames":["*"],"imports":1}},{"name":"./subchannel","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":21,"column":21,"index":815},"end":{"line":21,"column":44,"index":838}}],"key":"2NqMgElj9ImyaUKPjCzv4WJJ/l8=","exportNames":["*"],"imports":1}},{"name":"./subchannel-address","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":22,"column":29,"index":869},"end":{"line":22,"column":60,"index":900}}],"key":"s7maFfe6oUZ6E4vQAG2rWwUHpfM=","exportNames":["*"],"imports":1}},{"name":"./uri-parser","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":23,"column":21,"index":923},"end":{"line":23,"column":44,"index":946}}],"key":"esiO732HplrDMf1oXKGdpawa/aM=","exportNames":["*"],"imports":1}},{"name":"./transport","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":24,"column":20,"index":968},"end":{"line":24,"column":42,"index":990}}],"key":"cHQvsGFlFCXS45r9C4O851n7Lf4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.getSubchannelPool=e.SubchannelPool=void 0;const n=r(d[0]),l=r(d[1]),s=r(d[2]),t=r(d[3]),u=r(d[4]);class o{constructor(){this.pool=Object.create(null),this.cleanupTimer=null}unrefUnusedSubchannels(){let n=!0;for(const l in this.pool){const s=this.pool[l].filter(n=>!n.subchannel.unrefIfOneRef());s.length>0&&(n=!1),this.pool[l]=s}n&&null!==this.cleanupTimer&&(clearInterval(this.cleanupTimer),this.cleanupTimer=null)}ensureCleanupTask(){var n,l;null===this.cleanupTimer&&(this.cleanupTimer=setInterval(()=>{this.unrefUnusedSubchannels()},1e4),null===(l=(n=this.cleanupTimer).unref)||void 0===l||l.call(n))}getOrCreateSubchannel(o,c,h,p){this.ensureCleanupTask();const b=(0,t.uriToString)(o);if(b in this.pool){const l=this.pool[b];for(const t of l)if((0,s.subchannelAddressEqual)(c,t.subchannelAddress)&&(0,n.channelOptionsEqual)(h,t.channelArguments)&&p._equals(t.channelCredentials))return t.subchannel}const f=new l.Subchannel(o,c,h,p,new u.Http2SubchannelConnector(o));return b in this.pool||(this.pool[b]=[]),this.pool[b].push({subchannelAddress:c,channelArguments:h,channelCredentials:p,subchannel:f}),f.ref(),f}}e.SubchannelPool=o;const c=new o;e.getSubchannelPool=function(n){return n?c:new o}});","lineCount":1,"map":[[1,28,1,0],[1,41,18,0,"Object"],[1,48,18,7,"defineProperty"],[1,63,18,22,"exports"],[1,65,18,31],[1,78,18,45],[1,79,18,47,"value"],[1,86,18,54],[1,90,19,0,"exports"],[1,92,19,8,"getSubchannelPool"],[1,110,19,28,"exports"],[1,112,19,36,"SubchannelPool"],[1,132,19,50,"undefined"],[1,134,20,0],[1,140,20,6,"channel_options_1"],[1,142,20,26,"require"],[1,144,20,33,"d"],[1,146,20,33],[1,150,21,6,"subchannel_1"],[1,152,21,21,"require"],[1,154,21,28,"d"],[1,156,21,28],[1,160,22,6,"subchannel_address_1"],[1,162,22,29,"require"],[1,164,22,36,"d"],[1,166,22,36],[1,170,23,6,"uri_parser_1"],[1,172,23,21,"require"],[1,174,23,28,"d"],[1,176,23,28],[1,180,24,6,"transport_1"],[1,182,24,20,"require"],[1,184,24,27,"d"],[1,186,24,27],[1,190,31,0],[1,196,31,6,"SubchannelPool"],[1,198,36,4,"constructor"],[1,212,37,8,"this"],[1,217,37,13,"pool"],[1,222,37,20,"Object"],[1,229,37,27,"create"],[1,236,37,34],[1,242,41,8,"this"],[1,247,41,13,"cleanupTimer"],[1,260,41,28],[1,264,42,4],[1,265,47,4,"unrefUnusedSubchannels"],[1,290,48,8],[1,294,48,12,"allSubchannelsUnrefed"],[1,297,48,36],[1,299,53,8],[1,303,53,13],[1,309,53,19,"channelTarget"],[1,314,53,36,"this"],[1,319,53,41,"pool"],[1,324,53,47],[1,325,54,12],[1,331,55,18,"refedSubchannels"],[1,333,54,39,"this"],[1,338,54,44,"pool"],[1,343,54,49,"channelTarget"],[1,346,55,56,"filter"],[1,353,55,63,"value"],[1,357,55,73,"value"],[1,359,55,79,"subchannel"],[1,370,55,90,"unrefIfOneRef"],[1,387,56,16,"refedSubchannels"],[1,389,56,33,"length"],[1,396,56,42],[1,400,57,16,"allSubchannelsUnrefed"],[1,403,57,40],[1,406,62,12,"this"],[1,411,62,17,"pool"],[1,416,62,22,"channelTarget"],[1,419,62,39,"refedSubchannels"],[1,420,63,8],[1,421,67,12,"allSubchannelsUnrefed"],[1,424,67,59],[1,431,67,37,"this"],[1,436,67,42,"cleanupTimer"],[1,451,68,12,"clearInterval"],[1,465,68,26,"this"],[1,470,68,31,"cleanupTimer"],[1,484,69,12,"this"],[1,489,69,17,"cleanupTimer"],[1,502,69,32],[1,507,71,4],[1,508,75,4,"ensureCleanupTask"],[1,528,76,8],[1,532,76,12,"_a"],[1,534,76,16,"_b"],[1,536,77,34],[1,543,77,12,"this"],[1,548,77,17,"cleanupTimer"],[1,563,78,12,"this"],[1,568,78,17,"cleanupTimer"],[1,581,78,32,"setInterval"],[1,593,78,44],[1,598,79,16,"this"],[1,603,79,21,"unrefUnusedSubchannels"],[1,629,30,27],[1,634,83,54],[1,642,83,13,"_b"],[1,645,83,19,"_a"],[1,647,83,24,"this"],[1,652,83,29,"cleanupTimer"],[1,666,83,43,"unref"],[1,679,83,64,"undefined"],[1,683,83,62,"_b"],[1,686,83,87,"_b"],[1,688,83,90,"call"],[1,693,83,95,"_a"],[1,696,85,4],[1,697,94,4,"getOrCreateSubchannel"],[1,719,94,26,"channelTargetUri"],[1,721,94,44,"subchannelTarget"],[1,723,94,62,"channelArguments"],[1,725,94,80,"channelCredentials"],[1,728,95,8,"this"],[1,733,95,13,"ensureCleanupTask"],[1,753,96,8],[1,759,96,14,"channelTarget"],[1,762,96,30],[1,764,96,34,"uri_parser_1"],[1,766,96,47,"uriToString"],[1,779,96,60,"channelTargetUri"],[1,782,97,8],[1,785,97,12,"channelTarget"],[1,790,97,29,"this"],[1,795,97,34,"pool"],[1,800,97,40],[1,801,98,12],[1,807,98,18,"subchannelObjArray"],[1,809,98,39,"this"],[1,814,98,44,"pool"],[1,819,98,49,"channelTarget"],[1,822,99,12],[1,826,99,17],[1,832,99,23,"subchannelObj"],[1,837,99,40,"subchannelObjArray"],[1,839,100,16],[1,843,100,20],[1,845,100,24,"subchannel_address_1"],[1,847,100,45,"subchannelAddressEqual"],[1,871,100,69,"subchannelTarget"],[1,873,100,87,"subchannelObj"],[1,875,100,101,"subchannelAddress"],[1,896,101,20],[1,898,101,24,"channel_options_1"],[1,900,101,42,"channelOptionsEqual"],[1,921,101,63,"channelArguments"],[1,923,101,81,"subchannelObj"],[1,925,101,95,"channelArguments"],[1,944,102,20,"channelCredentials"],[1,946,102,39,"_equals"],[1,954,102,47,"subchannelObj"],[1,956,102,61,"channelCredentials"],[1,976,103,20],[1,983,103,27,"subchannelObj"],[1,985,103,41,"subchannel"],[1,995,106,8],[1,996,108,8],[1,1002,108,14,"subchannel"],[1,1004,108,27],[1,1008,108,31,"subchannel_1"],[1,1010,108,44,"Subchannel"],[1,1021,108,55,"channelTargetUri"],[1,1023,108,73,"subchannelTarget"],[1,1025,108,91,"channelArguments"],[1,1027,108,109,"channelCredentials"],[1,1029,108,129],[1,1033,108,133,"transport_1"],[1,1035,108,145,"Http2SubchannelConnector"],[1,1060,108,170,"channelTargetUri"],[1,1064,119,8],[1,1071,109,14,"channelTarget"],[1,1076,109,31,"this"],[1,1081,109,36,"pool"],[1,1088,110,12,"this"],[1,1093,110,17,"pool"],[1,1098,110,22,"channelTarget"],[1,1101,110,39],[1,1105,112,8,"this"],[1,1110,112,13,"pool"],[1,1115,112,18,"channelTarget"],[1,1118,112,33,"push"],[1,1123,112,38],[1,1124,113,12,"subchannelAddress"],[1,1142,113,31,"subchannelTarget"],[1,1144,114,12,"channelArguments"],[1,1163,115,12,"channelCredentials"],[1,1184,116,12,"subchannel"],[1,1199,118,8,"subchannel"],[1,1201,118,19,"ref"],[1,1207,119,15,"subchannel"],[1,1208,120,4],[1,1210,122,0,"exports"],[1,1212,122,8,"SubchannelPool"],[1,1227,122,25,"SubchannelPool"],[1,1229,123,0],[1,1235,123,6,"globalSubchannelPool"],[1,1237,123,29],[1,1241,123,33,"SubchannelPool"],[1,1243,136,0,"exports"],[1,1245,136,8,"getSubchannelPool"],[1,1263,128,0],[1,1272,128,27,"global"],[1,1275,129,4],[1,1282,129,8,"global"],[1,1284,130,15,"globalSubchannelPool"],[1,1286,133,15],[1,1290,133,19,"SubchannelPool"],[1,1291,135,0],[1,1292,136,46],[1,1295]],"functionMap":{"names":["<global>","SubchannelPool","SubchannelPool#constructor","SubchannelPool#unrefUnusedSubchannels","subchannelObjArray.filter$argument_0","SubchannelPool#ensureCleanupTask","setInterval$argument_0","SubchannelPool#getOrCreateSubchannel","getSubchannelPool"],"mappings":"AAA;AC8B;ICK;KDM;IEK;+DCQ,0CD;KFgB;III;4CCG;aDE;KJK;IMS;KN0B;CDC;AQO;CRO"},"hasCjsExports":true},"type":"js/module"}]}