{"dependencies":[{"name":"./load-balancer","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":20,"column":24,"index":815},"end":{"line":20,"column":50,"index":841}}],"key":"uOBAJTyNQHYWLk8tq5Ek7vETkD0=","exportNames":["*"],"imports":1}},{"name":"./connectivity-state","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":21,"column":29,"index":872},"end":{"line":21,"column":60,"index":903}}],"key":"jyxLDTe7V7Ou6ov9nXyoEe1g9Sg=","exportNames":["*"],"imports":1}},{"name":"./picker","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":22,"column":17,"index":922},"end":{"line":22,"column":36,"index":941}}],"key":"drq9s9jHKAQmdw2pWLLHD5nwu4I=","exportNames":["*"],"imports":1}},{"name":"./logging","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":23,"column":16,"index":959},"end":{"line":23,"column":36,"index":979}}],"key":"IuCQ7u+XFj9mcNQiMAuOpQn/EDM=","exportNames":["*"],"imports":1}},{"name":"./constants","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":24,"column":20,"index":1001},"end":{"line":24,"column":42,"index":1023}}],"key":"3z43bJyk/UB4EKjDCOXTFak09do=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,_i,a,m,e,d){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.setup=e.PickFirstLoadBalancer=e.shuffled=e.PickFirstLoadBalancingConfig=void 0;const t=r(d[0]),n=r(d[1]),i=r(d[2]),s=r(d[3]),c=r(d[4]);function l(t){s.trace(c.LogVerbosity.DEBUG,\"pick_first\",t)}const h='pick_first';class o{constructor(t){this.shuffleAddressList=t}getLoadBalancerName(){return h}toJsonObject(){return{[h]:{shuffleAddressList:this.shuffleAddressList}}}getShuffleAddressList(){return this.shuffleAddressList}static createFromJson(t){if('shuffleAddressList'in t&&'boolean'!=typeof t.shuffleAddressList)throw new Error('pick_first config field shuffleAddressList must be a boolean if provided');return new o(!0===t.shuffleAddressList)}}e.PickFirstLoadBalancingConfig=o;class u{constructor(t){this.subchannel=t}pick(t){return{pickResultType:i.PickResultType.COMPLETE,subchannel:this.subchannel,status:null,onCallStarted:null,onCallEnded:null}}}function S(t){const n=t.slice();for(let t=n.length-1;t>1;t--){const i=Math.floor(Math.random()*(t+1)),s=n[t];n[t]=n[i],n[i]=s}return n}e.shuffled=S;class f{constructor(t){this.channelControlHelper=t,this.children=[],this.currentState=n.ConnectivityState.IDLE,this.currentSubchannelIndex=0,this.currentPick=null,this.subchannelStateListener=(t,n,i,s,c)=>{this.onSubchannelStateUpdate(t,n,i,c)},this.triedAllSubchannels=!1,this.stickyTransientFailureMode=!1,this.requestedResolutionSinceLastUpdate=!1,this.lastError=null,this.latestAddressList=null,this.connectionDelayTimeout=setTimeout(()=>{},0),clearTimeout(this.connectionDelayTimeout)}allChildrenHaveReportedTF(){return this.children.every(t=>t.hasReportedTransientFailure)}calculateAndReportNewState(){this.currentPick?this.updateState(n.ConnectivityState.READY,new u(this.currentPick)):0===this.children.length?this.updateState(n.ConnectivityState.IDLE,new i.QueuePicker(this)):this.stickyTransientFailureMode?this.updateState(n.ConnectivityState.TRANSIENT_FAILURE,new i.UnavailablePicker({details:`No connection established. Last error: ${this.lastError}`})):this.updateState(n.ConnectivityState.CONNECTING,new i.QueuePicker(this))}requestReresolution(){this.requestedResolutionSinceLastUpdate=!0,this.channelControlHelper.requestReresolution()}maybeEnterStickyTransientFailureMode(){if(this.allChildrenHaveReportedTF()&&(this.requestedResolutionSinceLastUpdate||this.requestReresolution(),!this.stickyTransientFailureMode)){this.stickyTransientFailureMode=!0;for(const{subchannel:t}of this.children)t.startConnecting();this.calculateAndReportNewState()}}removeCurrentPick(){if(null!==this.currentPick){const t=this.currentPick;this.currentPick=null,t.unref(),t.removeConnectivityStateListener(this.subchannelStateListener),this.channelControlHelper.removeChannelzChild(t.getChannelzRef())}}onSubchannelStateUpdate(t,i,s,c){var l;if(null===(l=this.currentPick)||void 0===l?void 0:l.realSubchannelEquals(t))s!==n.ConnectivityState.READY&&(this.removeCurrentPick(),this.calculateAndReportNewState(),this.requestReresolution());else for(const[i,l]of this.children.entries())if(t.realSubchannelEquals(l.subchannel))return s===n.ConnectivityState.READY&&this.pickSubchannel(l.subchannel),s===n.ConnectivityState.TRANSIENT_FAILURE&&(l.hasReportedTransientFailure=!0,c&&(this.lastError=c),this.maybeEnterStickyTransientFailureMode(),i===this.currentSubchannelIndex&&this.startNextSubchannelConnecting(i+1)),void l.subchannel.startConnecting()}startNextSubchannelConnecting(t){if(clearTimeout(this.connectionDelayTimeout),!this.triedAllSubchannels){for(const[i,s]of this.children.entries())if(i>=t){const t=s.subchannel.getConnectivityState();if(t===n.ConnectivityState.IDLE||t===n.ConnectivityState.CONNECTING)return void this.startConnecting(i)}this.triedAllSubchannels=!0,this.maybeEnterStickyTransientFailureMode()}}startConnecting(t){var i,s;clearTimeout(this.connectionDelayTimeout),this.currentSubchannelIndex=t,this.children[t].subchannel.getConnectivityState()===n.ConnectivityState.IDLE&&(l('Start connecting to subchannel with address '+this.children[t].subchannel.getAddress()),process.nextTick(()=>{var n;null===(n=this.children[t])||void 0===n||n.subchannel.startConnecting()})),this.connectionDelayTimeout=null===(s=(i=setTimeout(()=>{this.startNextSubchannelConnecting(t+1)},250)).unref)||void 0===s?void 0:s.call(i)}pickSubchannel(t){this.currentPick&&t.realSubchannelEquals(this.currentPick)||(l('Pick subchannel with address '+t.getAddress()),this.stickyTransientFailureMode=!1,null!==this.currentPick&&(this.currentPick.unref(),this.channelControlHelper.removeChannelzChild(this.currentPick.getChannelzRef()),this.currentPick.removeConnectivityStateListener(this.subchannelStateListener)),this.currentPick=t,t.ref(),this.channelControlHelper.addChannelzChild(t.getChannelzRef()),this.resetSubchannelList(),clearTimeout(this.connectionDelayTimeout),this.calculateAndReportNewState())}updateState(t,i){l(n.ConnectivityState[this.currentState]+' -> '+n.ConnectivityState[t]),this.currentState=t,this.channelControlHelper.updateState(t,i)}resetSubchannelList(){for(const t of this.children)this.currentPick&&t.subchannel.realSubchannelEquals(this.currentPick)||t.subchannel.removeConnectivityStateListener(this.subchannelStateListener),t.subchannel.unref(),this.channelControlHelper.removeChannelzChild(t.subchannel.getChannelzRef());this.currentSubchannelIndex=0,this.children=[],this.triedAllSubchannels=!1,this.requestedResolutionSinceLastUpdate=!1}connectToAddressList(t){const i=t.map(t=>({subchannel:this.channelControlHelper.createSubchannel(t,{}),hasReportedTransientFailure:!1}));for(const{subchannel:t}of i)t.ref(),this.channelControlHelper.addChannelzChild(t.getChannelzRef());this.resetSubchannelList(),this.children=i;for(const{subchannel:t}of this.children)if(t.addConnectivityStateListener(this.subchannelStateListener),t.getConnectivityState()===n.ConnectivityState.READY)return void this.pickSubchannel(t);for(const t of this.children)t.subchannel.getConnectivityState()===n.ConnectivityState.TRANSIENT_FAILURE&&(t.hasReportedTransientFailure=!0);this.startNextSubchannelConnecting(0),this.calculateAndReportNewState()}updateAddressList(t,n){n instanceof o&&(n.getShuffleAddressList()&&(t=S(t)),this.latestAddressList=t,this.connectToAddressList(t))}exitIdle(){this.currentState===n.ConnectivityState.IDLE&&this.latestAddressList&&this.connectToAddressList(this.latestAddressList)}resetBackoff(){}destroy(){this.resetSubchannelList(),this.removeCurrentPick()}getTypeName(){return h}}e.PickFirstLoadBalancer=f,e.setup=function(){(0,t.registerLoadBalancerType)(h,f,o),(0,t.registerDefaultLoadBalancerType)(h)}});","lineCount":1,"map":[[1,29,1,0],[1,42,18,0,"Object"],[1,49,18,7,"defineProperty"],[1,64,18,22,"exports"],[1,66,18,31],[1,79,18,45],[1,80,18,47,"value"],[1,87,18,54],[1,91,19,0,"exports"],[1,93,19,8,"setup"],[1,99,19,16,"exports"],[1,101,19,24,"PickFirstLoadBalancer"],[1,123,19,48,"exports"],[1,125,19,56,"shuffled"],[1,134,19,67,"exports"],[1,136,19,75,"PickFirstLoadBalancingConfig"],[1,170,19,103,"undefined"],[1,172,20,0],[1,178,20,6,"load_balancer_1"],[1,180,20,24,"require"],[1,182,20,31,"d"],[1,184,20,31],[1,188,21,6,"connectivity_state_1"],[1,190,21,29,"require"],[1,192,21,36,"d"],[1,194,21,36],[1,198,22,6,"picker_1"],[1,200,22,17,"require"],[1,202,22,24,"d"],[1,204,22,24],[1,208,23,6,"logging"],[1,210,23,16,"require"],[1,212,23,23,"d"],[1,214,23,23],[1,218,24,6,"constants_1"],[1,220,24,20,"require"],[1,222,24,27,"d"],[1,224,24,27],[1,228,26,0],[1,237,26,9,"trace"],[1,239,26,15,"text"],[1,242,27,4,"logging"],[1,244,27,12,"trace"],[1,250,27,18,"constants_1"],[1,252,27,30,"LogVerbosity"],[1,265,27,43,"DEBUG"],[1,271,25,20],[1,284,27,63,"text"],[1,286,28,0],[1,287,29,0],[1,293,29,6,"TYPE_NAME"],[1,295,29,18],[1,308,35,0],[1,314,35,6,"PickFirstLoadBalancingConfig"],[1,316,36,4,"constructor"],[1,328,36,16,"shuffleAddressList"],[1,331,37,8,"this"],[1,336,37,13,"shuffleAddressList"],[1,355,37,34,"shuffleAddressList"],[1,356,38,4],[1,357,39,4,"getLoadBalancerName"],[1,379,40,8],[1,386,40,15,"TYPE_NAME"],[1,387,41,4],[1,388,42,4,"toJsonObject"],[1,403,43,8],[1,409,43,15],[1,410,44,12,"TYPE_NAME"],[1,411,44,13,"TYPE_NAME"],[1,414,44,25],[1,415,45,16,"shuffleAddressList"],[1,434,45,36,"this"],[1,439,45,41,"shuffleAddressList"],[1,459,48,4],[1,460,49,4,"getShuffleAddressList"],[1,484,50,8],[1,491,50,15,"this"],[1,496,50,20,"shuffleAddressList"],[1,514,51,4],[1,515,53,4],[1,536,53,11,"createFromJson"],[1,537,53,26,"obj"],[1,540,54,8],[1,543,54,12],[1,566,54,36,"obj"],[1,569,55,48],[1,587,55,21,"obj"],[1,589,55,25,"shuffleAddressList"],[1,608,56,12],[1,614,56,18],[1,618,56,22,"Error"],[1,624,56,28],[1,700,58,8],[1,707,58,15],[1,711,58,19,"PickFirstLoadBalancingConfig"],[1,714,58,75],[1,718,58,48,"obj"],[1,720,58,52,"shuffleAddressList"],[1,739,59,4],[1,741,61,0,"exports"],[1,743,61,8,"PickFirstLoadBalancingConfig"],[1,772,61,39,"PickFirstLoadBalancingConfig"],[1,774,66,0],[1,780,66,6,"PickFirstPicker"],[1,782,67,4,"constructor"],[1,794,67,16,"subchannel"],[1,797,68,8,"this"],[1,802,68,13,"subchannel"],[1,813,68,26,"subchannel"],[1,814,69,4],[1,815,70,4,"pick"],[1,820,70,9,"pickArgs"],[1,823,71,8],[1,829,71,15],[1,830,72,12,"pickResultType"],[1,845,72,28,"picker_1"],[1,847,72,37,"PickResultType"],[1,862,72,52,"COMPLETE"],[1,871,73,12,"subchannel"],[1,882,73,24,"this"],[1,887,73,29,"subchannel"],[1,898,74,12,"status"],[1,905,74,20],[1,910,75,12,"onCallStarted"],[1,924,75,27],[1,929,76,12,"onCallEnded"],[1,941,76,25],[1,946,78,4],[1,948,85,0],[1,957,85,9,"shuffled"],[1,959,85,18,"list"],[1,962,86,4],[1,968,86,10,"result"],[1,970,86,19,"list"],[1,972,86,24,"slice"],[1,980,87,4],[1,984,87,9],[1,988,87,13,"i"],[1,990,87,17,"result"],[1,992,87,24,"length"],[1,999,87,33],[1,1001,87,36,"i"],[1,1003,87,40],[1,1005,87,43,"i"],[1,1009,87,48],[1,1010,88,8],[1,1016,88,14,"j"],[1,1018,88,18,"Math"],[1,1023,88,23,"floor"],[1,1029,88,29,"Math"],[1,1034,88,34,"random"],[1,1044,88,46,"i"],[1,1046,88,50],[1,1050,89,14,"temp"],[1,1052,89,21,"result"],[1,1054,89,28,"i"],[1,1057,90,8,"result"],[1,1059,90,15,"i"],[1,1062,90,20,"result"],[1,1064,90,27,"j"],[1,1067,91,8,"result"],[1,1069,91,15,"j"],[1,1072,91,20,"temp"],[1,1073,92,4],[1,1074,93,4],[1,1081,93,11,"result"],[1,1082,94,0],[1,1083,95,0,"exports"],[1,1085,95,8,"shuffled"],[1,1094,95,19,"shuffled"],[1,1096,96,0],[1,1102,96,6,"PickFirstLoadBalancer"],[1,1104,104,4,"constructor"],[1,1116,104,16,"channelControlHelper"],[1,1119,105,8,"this"],[1,1124,105,13,"channelControlHelper"],[1,1145,105,36,"channelControlHelper"],[1,1147,110,8,"this"],[1,1152,110,13,"children"],[1,1161,110,24],[1,1164,114,8,"this"],[1,1169,114,13,"currentState"],[1,1182,114,28,"connectivity_state_1"],[1,1184,114,49,"ConnectivityState"],[1,1202,114,67,"IDLE"],[1,1207,119,8,"this"],[1,1212,119,13,"currentSubchannelIndex"],[1,1235,119,38],[1,1237,125,8,"this"],[1,1242,125,13,"currentPick"],[1,1254,125,27],[1,1259,130,8,"this"],[1,1264,130,13,"subchannelStateListener"],[1,1288,130,39],[1,1289,130,40,"subchannel"],[1,1291,130,52,"previousState"],[1,1293,130,67,"newState"],[1,1295,130,77,"keepaliveTime"],[1,1297,130,92,"errorMessage"],[1,1302,131,12,"this"],[1,1307,131,17,"onSubchannelStateUpdate"],[1,1331,131,41,"subchannel"],[1,1333,131,53,"previousState"],[1,1335,131,68,"newState"],[1,1337,131,78,"errorMessage"],[1,1341,133,8,"this"],[1,1346,133,13,"triedAllSubchannels"],[1,1367,133,35],[1,1369,140,8,"this"],[1,1374,140,13,"stickyTransientFailureMode"],[1,1402,140,42],[1,1404,145,8,"this"],[1,1409,145,13,"requestedResolutionSinceLastUpdate"],[1,1445,145,50],[1,1447,150,8,"this"],[1,1452,150,13,"lastError"],[1,1462,150,25],[1,1467,151,8,"this"],[1,1472,151,13,"latestAddressList"],[1,1490,151,33],[1,1495,152,8,"this"],[1,1500,152,13,"connectionDelayTimeout"],[1,1523,152,38,"setTimeout"],[1,1534,152,49],[1,1541,152,60],[1,1544,153,8,"clearTimeout"],[1,1557,153,21,"this"],[1,1562,153,26,"connectionDelayTimeout"],[1,1585,154,4],[1,1586,155,4,"allChildrenHaveReportedTF"],[1,1614,156,8],[1,1621,156,15,"this"],[1,1626,156,20,"children"],[1,1635,156,29,"every"],[1,1641,156,35,"child"],[1,1644,156,44,"child"],[1,1646,156,50,"hasReportedTransientFailure"],[1,1674,157,4],[1,1675,158,4,"calculateAndReportNewState"],[1,1704,159,12,"this"],[1,1709,159,17,"currentPick"],[1,1721,160,12,"this"],[1,1726,160,17,"updateState"],[1,1738,160,29,"connectivity_state_1"],[1,1740,160,50,"ConnectivityState"],[1,1758,160,68,"READY"],[1,1764,160,75],[1,1768,160,79,"PickFirstPicker"],[1,1770,160,95,"this"],[1,1775,160,100,"currentPick"],[1,1789,162,42],[1,1793,162,17,"this"],[1,1798,162,22,"children"],[1,1807,162,31,"length"],[1,1814,163,12,"this"],[1,1819,163,17,"updateState"],[1,1831,163,29,"connectivity_state_1"],[1,1833,163,50,"ConnectivityState"],[1,1851,163,68,"IDLE"],[1,1856,163,74],[1,1860,163,78,"picker_1"],[1,1862,163,87,"QueuePicker"],[1,1874,163,99,"this"],[1,1881,166,16,"this"],[1,1886,166,21,"stickyTransientFailureMode"],[1,1913,167,16,"this"],[1,1918,167,21,"updateState"],[1,1930,167,33,"connectivity_state_1"],[1,1932,167,54,"ConnectivityState"],[1,1950,167,72,"TRANSIENT_FAILURE"],[1,1968,167,91],[1,1972,167,95,"picker_1"],[1,1974,167,104,"UnavailablePicker"],[1,1992,167,122],[1,1993,167,124,"details"],[1,2001,167,133],[1,2043,167,175,"this"],[1,2048,167,180,"lastError"],[1,2063,170,16,"this"],[1,2068,170,21,"updateState"],[1,2080,170,33,"connectivity_state_1"],[1,2082,170,54,"ConnectivityState"],[1,2100,170,72,"CONNECTING"],[1,2111,170,84],[1,2115,170,88,"picker_1"],[1,2117,170,97,"QueuePicker"],[1,2129,170,109,"this"],[1,2135,173,4],[1,2136,174,4,"requestReresolution"],[1,2158,175,8,"this"],[1,2163,175,13,"requestedResolutionSinceLastUpdate"],[1,2199,175,50],[1,2201,176,8,"this"],[1,2206,176,13,"channelControlHelper"],[1,2227,176,34,"requestReresolution"],[1,2248,177,4],[1,2249,178,4,"maybeEnterStickyTransientFailureMode"],[1,2288,179,8],[1,2291,179,13,"this"],[1,2296,179,18,"allChildrenHaveReportedTF"],[1,2326,182,13,"this"],[1,2331,182,18,"requestedResolutionSinceLastUpdate"],[1,2367,189,12,"this"],[1,2372,189,17,"requestReresolution"],[1,2395,191,12,"this"],[1,2400,191,17,"stickyTransientFailureMode"],[1,2428,191,8],[1,2429,194,8,"this"],[1,2434,194,13,"stickyTransientFailureMode"],[1,2462,194,42],[1,2464,195,8],[1,2468,195,13],[1,2474,195,19,"subchannel"],[1,2485,195,21,"subchannel"],[1,2490,195,37,"this"],[1,2495,195,42,"children"],[1,2504,196,12,"subchannel"],[1,2506,196,23,"startConnecting"],[1,2524,198,8,"this"],[1,2529,198,13,"calculateAndReportNewState"],[1,2557,193,8],[1,2558,199,4],[1,2559,200,4,"removeCurrentPick"],[1,2579,201,8],[1,2582,201,33],[1,2589,201,12,"this"],[1,2594,201,17,"currentPick"],[1,2606,201,39],[1,2607,205,12],[1,2613,205,18,"currentPick"],[1,2615,205,32,"this"],[1,2620,205,37,"currentPick"],[1,2632,206,12,"this"],[1,2637,206,17,"currentPick"],[1,2649,206,31],[1,2654,207,12,"currentPick"],[1,2656,207,24,"unref"],[1,2664,208,12,"currentPick"],[1,2666,208,24,"removeConnectivityStateListener"],[1,2698,208,56,"this"],[1,2703,208,61,"subchannelStateListener"],[1,2728,209,12,"this"],[1,2733,209,17,"channelControlHelper"],[1,2754,209,38,"removeChannelzChild"],[1,2774,209,58,"currentPick"],[1,2776,209,70,"getChannelzRef"],[1,2793,210,8],[1,2794,211,4],[1,2795,212,4,"onSubchannelStateUpdate"],[1,2819,212,28,"subchannel"],[1,2821,212,40,"previousState"],[1,2823,212,55,"newState"],[1,2825,212,65,"errorMessage"],[1,2828,213,8],[1,2832,213,12,"_a"],[1,2834,214,8],[1,2837,214,40],[1,2845,214,13,"_a"],[1,2847,214,18,"this"],[1,2852,214,23,"currentPick"],[1,2871,214,50,"undefined"],[1,2875,214,48,"_a"],[1,2882,214,61,"undefined"],[1,2884,214,73,"_a"],[1,2886,214,76,"realSubchannelEquals"],[1,2907,214,97,"subchannel"],[1,2910,215,16,"newState"],[1,2914,215,29,"connectivity_state_1"],[1,2916,215,50,"ConnectivityState"],[1,2934,215,68,"READY"],[1,2942,216,16,"this"],[1,2947,216,21,"removeCurrentPick"],[1,2967,217,16,"this"],[1,2972,217,21,"calculateAndReportNewState"],[1,3001,218,16,"this"],[1,3006,218,21,"requestReresolution"],[1,3034,222,8],[1,3038,222,13],[1,3044,222,20,"index"],[1,3046,222,27,"child"],[1,3051,222,37,"this"],[1,3056,222,42,"children"],[1,3065,222,51,"entries"],[1,3075,223,12],[1,3078,223,16,"subchannel"],[1,3080,223,27,"realSubchannelEquals"],[1,3101,223,48,"child"],[1,3103,223,54,"subchannel"],[1,3115,238,16],[1,3122,224,20,"newState"],[1,3126,224,33,"connectivity_state_1"],[1,3128,224,54,"ConnectivityState"],[1,3146,224,72,"READY"],[1,3153,225,20,"this"],[1,3158,225,25,"pickSubchannel"],[1,3173,225,40,"child"],[1,3175,225,46,"subchannel"],[1,3187,227,20,"newState"],[1,3191,227,33,"connectivity_state_1"],[1,3193,227,54,"ConnectivityState"],[1,3211,227,72,"TRANSIENT_FAILURE"],[1,3231,228,20,"child"],[1,3233,228,26,"hasReportedTransientFailure"],[1,3262,228,56],[1,3264,229,24,"errorMessage"],[1,3268,230,24,"this"],[1,3273,230,29,"lastError"],[1,3283,230,41,"errorMessage"],[1,3286,232,20,"this"],[1,3291,232,25,"maybeEnterStickyTransientFailureMode"],[1,3330,233,24,"index"],[1,3334,233,34,"this"],[1,3339,233,39,"currentSubchannelIndex"],[1,3363,234,24,"this"],[1,3368,234,29,"startNextSubchannelConnecting"],[1,3398,234,59,"index"],[1,3400,234,67],[1,3409,237,16,"child"],[1,3411,237,22,"subchannel"],[1,3422,237,33,"startConnecting"],[1,3439,241,4],[1,3440,242,4,"startNextSubchannelConnecting"],[1,3470,242,34,"startIndex"],[1,3473,244,8],[1,3476,243,8,"clearTimeout"],[1,3489,243,21,"this"],[1,3494,243,26,"connectionDelayTimeout"],[1,3519,244,12,"this"],[1,3524,244,17,"triedAllSubchannels"],[1,3544,244,8],[1,3545,247,8],[1,3549,247,13],[1,3555,247,20,"index"],[1,3557,247,27,"child"],[1,3562,247,37,"this"],[1,3567,247,42,"children"],[1,3576,247,51,"entries"],[1,3586,248,12],[1,3589,248,16,"index"],[1,3592,248,25,"startIndex"],[1,3594,248,37],[1,3595,249,16],[1,3601,249,22,"subchannelState"],[1,3603,249,40,"child"],[1,3605,249,46,"subchannel"],[1,3616,249,57,"getConnectivityState"],[1,3639,250,16],[1,3642,250,20,"subchannelState"],[1,3646,250,40,"connectivity_state_1"],[1,3648,250,61,"ConnectivityState"],[1,3666,250,79,"IDLE"],[1,3672,251,20,"subchannelState"],[1,3676,251,40,"connectivity_state_1"],[1,3678,251,61,"ConnectivityState"],[1,3696,251,79,"CONNECTING"],[1,3707,253,20],[1,3719,252,20,"this"],[1,3724,252,25,"startConnecting"],[1,3740,252,41,"index"],[1,3742,255,12],[1,3743,257,8,"this"],[1,3748,257,13,"triedAllSubchannels"],[1,3769,257,35],[1,3771,258,8,"this"],[1,3776,258,13,"maybeEnterStickyTransientFailureMode"],[1,3814,246,8],[1,3815,259,4],[1,3816,264,4,"startConnecting"],[1,3832,264,20,"subchannelIndex"],[1,3835,265,8],[1,3839,265,12,"_a"],[1,3841,265,16,"_b"],[1,3843,266,8,"clearTimeout"],[1,3856,266,21,"this"],[1,3861,266,26,"connectionDelayTimeout"],[1,3885,267,8,"this"],[1,3890,267,13,"currentSubchannelIndex"],[1,3913,267,38,"subchannelIndex"],[1,3915,268,12,"this"],[1,3920,268,17,"children"],[1,3929,268,26,"subchannelIndex"],[1,3932,268,43,"subchannel"],[1,3943,268,54,"getConnectivityState"],[1,3968,269,12,"connectivity_state_1"],[1,3970,269,33,"ConnectivityState"],[1,3988,269,51,"IDLE"],[1,3995,270,12,"trace"],[1,3997,270,18],[1,4044,271,16,"this"],[1,4049,271,21,"children"],[1,4058,271,30,"subchannelIndex"],[1,4061,271,47,"subchannel"],[1,4072,271,58,"getAddress"],[1,4086,272,12,"process"],[1,4094,272,20,"nextTick"],[1,4103,272,29],[1,4108,273,16],[1,4112,273,20,"_a"],[1,4114,274,58],[1,4122,274,17,"_a"],[1,4124,274,22,"this"],[1,4129,274,27,"children"],[1,4138,274,36,"subchannelIndex"],[1,4148,274,68,"undefined"],[1,4152,274,66,"_a"],[1,4155,274,91,"_a"],[1,4157,274,94,"subchannel"],[1,4168,274,105,"startConnecting"],[1,4189,277,8,"this"],[1,4194,277,13,"connectionDelayTimeout"],[1,4217,279,53],[1,4225,277,39,"_b"],[1,4228,277,45,"_a"],[1,4230,277,50,"setTimeout"],[1,4241,277,61],[1,4246,278,12,"this"],[1,4251,278,17,"startNextSubchannelConnecting"],[1,4281,278,47,"subchannelIndex"],[1,4283,278,65],[1,4287,34,37],[1,4293,279,42,"unref"],[1,4306,279,63,"undefined"],[1,4310,279,61,"_b"],[1,4317,279,74,"undefined"],[1,4319,279,86,"_b"],[1,4321,279,89,"call"],[1,4326,279,94,"_a"],[1,4328,280,4],[1,4329,281,4,"pickSubchannel"],[1,4344,281,19,"subchannel"],[1,4347,282,12,"this"],[1,4352,282,17,"currentPick"],[1,4365,282,32,"subchannel"],[1,4367,282,43,"realSubchannelEquals"],[1,4388,282,64,"this"],[1,4393,282,69,"currentPick"],[1,4408,285,8,"trace"],[1,4410,285,14],[1,4442,285,48,"subchannel"],[1,4444,285,59,"getAddress"],[1,4458,286,8,"this"],[1,4463,286,13,"stickyTransientFailureMode"],[1,4491,286,42],[1,4493,287,33],[1,4500,287,12,"this"],[1,4505,287,17,"currentPick"],[1,4519,288,12,"this"],[1,4524,288,17,"currentPick"],[1,4536,288,29,"unref"],[1,4544,289,12,"this"],[1,4549,289,17,"channelControlHelper"],[1,4570,289,38,"removeChannelzChild"],[1,4590,289,58,"this"],[1,4595,289,63,"currentPick"],[1,4607,289,75,"getChannelzRef"],[1,4625,290,12,"this"],[1,4630,290,17,"currentPick"],[1,4642,290,29,"removeConnectivityStateListener"],[1,4674,290,61,"this"],[1,4679,290,66,"subchannelStateListener"],[1,4705,292,8,"this"],[1,4710,292,13,"currentPick"],[1,4722,292,27,"subchannel"],[1,4724,293,8,"subchannel"],[1,4726,293,19,"ref"],[1,4732,294,8,"this"],[1,4737,294,13,"channelControlHelper"],[1,4758,294,34,"addChannelzChild"],[1,4775,294,51,"subchannel"],[1,4777,294,62,"getChannelzRef"],[1,4795,295,8,"this"],[1,4800,295,13,"resetSubchannelList"],[1,4822,296,8,"clearTimeout"],[1,4835,296,21,"this"],[1,4840,296,26,"connectionDelayTimeout"],[1,4864,297,8,"this"],[1,4869,297,13,"calculateAndReportNewState"],[1,4898,298,4],[1,4899,299,4,"updateState"],[1,4911,299,16,"newState"],[1,4913,299,26,"picker"],[1,4916,300,8,"trace"],[1,4918,300,14,"connectivity_state_1"],[1,4920,300,35,"ConnectivityState"],[1,4938,300,53,"this"],[1,4943,300,58,"currentState"],[1,4957,301,12],[1,4964,302,12,"connectivity_state_1"],[1,4966,302,33,"ConnectivityState"],[1,4984,302,51,"newState"],[1,4988,303,8,"this"],[1,4993,303,13,"currentState"],[1,5006,303,28,"newState"],[1,5008,304,8,"this"],[1,5013,304,13,"channelControlHelper"],[1,5034,304,34,"updateState"],[1,5046,304,46,"newState"],[1,5048,304,56,"picker"],[1,5050,305,4],[1,5051,306,4,"resetSubchannelList"],[1,5073,307,8],[1,5077,307,13],[1,5083,307,19,"child"],[1,5088,307,28,"this"],[1,5093,307,33,"children"],[1,5102,308,18,"this"],[1,5107,308,23,"currentPick"],[1,5120,308,38,"child"],[1,5122,308,44,"subchannel"],[1,5133,308,55,"realSubchannelEquals"],[1,5154,308,76,"this"],[1,5159,308,81,"currentPick"],[1,5173,313,16,"child"],[1,5175,313,22,"subchannel"],[1,5186,313,33,"removeConnectivityStateListener"],[1,5218,313,65,"this"],[1,5223,313,70,"subchannelStateListener"],[1,5248,319,12,"child"],[1,5250,319,18,"subchannel"],[1,5261,319,29,"unref"],[1,5269,320,12,"this"],[1,5274,320,17,"channelControlHelper"],[1,5295,320,38,"removeChannelzChild"],[1,5315,320,58,"child"],[1,5317,320,64,"subchannel"],[1,5328,320,75,"getChannelzRef"],[1,5346,322,8,"this"],[1,5351,322,13,"currentSubchannelIndex"],[1,5374,322,38],[1,5376,323,8,"this"],[1,5381,323,13,"children"],[1,5390,323,24],[1,5393,324,8,"this"],[1,5398,324,13,"triedAllSubchannels"],[1,5419,324,35],[1,5421,325,8,"this"],[1,5426,325,13,"requestedResolutionSinceLastUpdate"],[1,5462,325,50],[1,5463,326,4],[1,5464,327,4,"connectToAddressList"],[1,5485,327,25,"addressList"],[1,5488,328,8],[1,5494,328,14,"newChildrenList"],[1,5496,328,32,"addressList"],[1,5498,328,44,"map"],[1,5502,328,48,"address"],[1,5506,328,55],[1,5507,329,12,"subchannel"],[1,5518,329,24,"this"],[1,5523,329,29,"channelControlHelper"],[1,5544,329,50,"createSubchannel"],[1,5561,329,67,"address"],[1,5563,329,76],[1,5564,329,77],[1,5567,330,12,"hasReportedTransientFailure"],[1,5596,330,41],[1,5601,335,8],[1,5605,335,13],[1,5611,335,19,"subchannel"],[1,5622,335,21,"subchannel"],[1,5627,335,37,"newChildrenList"],[1,5629,336,12,"subchannel"],[1,5631,336,23,"ref"],[1,5637,337,12,"this"],[1,5642,337,17,"channelControlHelper"],[1,5663,337,38,"addChannelzChild"],[1,5680,337,55,"subchannel"],[1,5682,337,66,"getChannelzRef"],[1,5700,339,8,"this"],[1,5705,339,13,"resetSubchannelList"],[1,5727,340,8,"this"],[1,5732,340,13,"children"],[1,5741,340,24,"newChildrenList"],[1,5743,341,8],[1,5747,341,13],[1,5753,341,19,"subchannel"],[1,5764,341,21,"subchannel"],[1,5769,341,37,"this"],[1,5774,341,42,"children"],[1,5783,343,12],[1,5786,342,12,"subchannel"],[1,5788,342,23,"addConnectivityStateListener"],[1,5817,342,52,"this"],[1,5822,342,57,"subchannelStateListener"],[1,5847,343,16,"subchannel"],[1,5849,343,27,"getConnectivityState"],[1,5874,343,54,"connectivity_state_1"],[1,5876,343,75,"ConnectivityState"],[1,5894,343,93,"READY"],[1,5900,345,16],[1,5912,344,16,"this"],[1,5917,344,21,"pickSubchannel"],[1,5932,344,36,"subchannel"],[1,5935,348,8],[1,5939,348,13],[1,5945,348,19,"child"],[1,5950,348,28,"this"],[1,5955,348,33,"children"],[1,5964,349,16,"child"],[1,5966,349,22,"subchannel"],[1,5977,349,33,"getConnectivityState"],[1,6002,350,16,"connectivity_state_1"],[1,6004,350,37,"ConnectivityState"],[1,6022,350,55,"TRANSIENT_FAILURE"],[1,6042,351,16,"child"],[1,6044,351,22,"hasReportedTransientFailure"],[1,6073,351,52],[1,6076,354,8,"this"],[1,6081,354,13,"startNextSubchannelConnecting"],[1,6111,354,43],[1,6114,355,8,"this"],[1,6119,355,13,"calculateAndReportNewState"],[1,6147,356,4],[1,6148,357,4,"updateAddressList"],[1,6166,357,22,"addressList"],[1,6168,357,35,"lbConfig"],[1,6171,358,14,"lbConfig"],[1,6184,358,34,"PickFirstLoadBalancingConfig"],[1,6188,364,12,"lbConfig"],[1,6190,364,21,"getShuffleAddressList"],[1,6216,365,12,"addressList"],[1,6218,365,26,"shuffled"],[1,6220,365,35,"addressList"],[1,6224,367,8,"this"],[1,6229,367,13,"latestAddressList"],[1,6247,367,33,"addressList"],[1,6249,368,8,"this"],[1,6254,368,13,"connectToAddressList"],[1,6275,368,34,"addressList"],[1,6278,369,4],[1,6279,370,4,"exitIdle"],[1,6290,371,12,"this"],[1,6295,371,17,"currentState"],[1,6310,371,34,"connectivity_state_1"],[1,6312,371,55,"ConnectivityState"],[1,6330,371,73,"IDLE"],[1,6336,371,81,"this"],[1,6341,371,86,"latestAddressList"],[1,6360,372,12,"this"],[1,6365,372,17,"connectToAddressList"],[1,6386,372,38,"this"],[1,6391,372,43,"latestAddressList"],[1,6409,374,4],[1,6410,375,4,"resetBackoff"],[1,6425,376,8],[1,6426,379,4,"destroy"],[1,6436,380,8,"this"],[1,6441,380,13,"resetSubchannelList"],[1,6463,381,8,"this"],[1,6468,381,13,"removeCurrentPick"],[1,6487,382,4],[1,6488,383,4,"getTypeName"],[1,6502,384,8],[1,6509,384,15,"TYPE_NAME"],[1,6510,385,4],[1,6512,387,0,"exports"],[1,6514,387,8,"PickFirstLoadBalancer"],[1,6536,387,32,"PickFirstLoadBalancer"],[1,6538,392,0,"exports"],[1,6540,392,8,"setup"],[1,6546,388,0],[1,6558,389,4],[1,6560,389,8,"load_balancer_1"],[1,6562,389,24,"registerLoadBalancerType"],[1,6588,389,50,"TYPE_NAME"],[1,6590,389,61,"PickFirstLoadBalancer"],[1,6592,389,84,"PickFirstLoadBalancingConfig"],[1,6596,390,4],[1,6598,390,8,"load_balancer_1"],[1,6600,390,24,"registerDefaultLoadBalancerType"],[1,6633,390,57,"TYPE_NAME"],[1,6635,391,0],[1,6636,392,22],[1,6639]],"functionMap":{"names":["<global>","trace","PickFirstLoadBalancingConfig","PickFirstLoadBalancingConfig#constructor","PickFirstLoadBalancingConfig#getLoadBalancerName","PickFirstLoadBalancingConfig#toJsonObject","PickFirstLoadBalancingConfig#getShuffleAddressList","PickFirstLoadBalancingConfig.createFromJson","PickFirstPicker","PickFirstPicker#constructor","PickFirstPicker#pick","shuffled","PickFirstLoadBalancer","PickFirstLoadBalancer#constructor","subchannelStateListener","setTimeout$argument_0","PickFirstLoadBalancer#allChildrenHaveReportedTF","children.every$argument_0","PickFirstLoadBalancer#calculateAndReportNewState","PickFirstLoadBalancer#requestReresolution","PickFirstLoadBalancer#maybeEnterStickyTransientFailureMode","PickFirstLoadBalancer#removeCurrentPick","PickFirstLoadBalancer#onSubchannelStateUpdate","PickFirstLoadBalancer#startNextSubchannelConnecting","PickFirstLoadBalancer#startConnecting","process.nextTick$argument_0","PickFirstLoadBalancer#pickSubchannel","PickFirstLoadBalancer#updateState","PickFirstLoadBalancer#resetSubchannelList","PickFirstLoadBalancer#connectToAddressList","addressList.map$argument_0","PickFirstLoadBalancer#updateAddressList","PickFirstLoadBalancer#exitIdle","PickFirstLoadBalancer#resetBackoff","PickFirstLoadBalancer#destroy","PickFirstLoadBalancer#getTypeName","setup"],"mappings":"AAA;ACyB;CDE;AEO;ICC;KDE;IEC;KFE;IGC;KHM;IIC;KJE;IKE;KLM;CFC;AQM;ICC;KDE;IEC;KFQ;CRC;AWM;CXS;AYE;ICQ;uCC0B;SDE;iDEoB,SF;KDE;IIC;mCCC,0CD;KJC;IMC;KNe;IOC;KPG;IQC;KRqB;ISC;KTW;IUC;KV6B;IWC;KXiB;IYK;6BCQ;aDG;6DTE;SSE;KZC;IcC;KdiB;IeC;KfM;IgBC;KhBoB;IiBC;gDCC;UDG;KjByB;ImBC;KnBY;IoBC;KpBI;IqBC;KrBG;IsBC;KtBG;IuBC;KvBE;CZC;AoCE;CpCG"},"hasCjsExports":true},"type":"js/module"}]}