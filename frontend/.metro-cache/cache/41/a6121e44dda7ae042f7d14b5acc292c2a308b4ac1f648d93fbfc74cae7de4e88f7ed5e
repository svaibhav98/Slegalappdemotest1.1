{"dependencies":[{"name":"./wrap-idb-value.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":67,"index":67}}],"key":"OGBTW7H/ooZIE0ffuAGbHXYdREw=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){\"use strict\";Object.defineProperty(e,'__esModule',{value:!0}),Object.defineProperty(e,\"unwrap\",{enumerable:!0,get:function(){return n.u}}),Object.defineProperty(e,\"wrap\",{enumerable:!0,get:function(){return n.w}}),Object.defineProperty(e,\"deleteDB\",{enumerable:!0,get:function(){return o}}),Object.defineProperty(e,\"openDB\",{enumerable:!0,get:function(){return t}});var n=r(d[0]);function t(t,o,{blocked:s,upgrade:c,blocking:u,terminated:l}={}){const f=indexedDB.open(t,o),b=(0,n.w)(f);return c&&f.addEventListener('upgradeneeded',t=>{c((0,n.w)(f.result),t.oldVersion,t.newVersion,(0,n.w)(f.transaction),t)}),s&&f.addEventListener('blocked',n=>s(n.oldVersion,n.newVersion,n)),b.then(n=>{l&&n.addEventListener('close',()=>l()),u&&n.addEventListener('versionchange',n=>u(n.oldVersion,n.newVersion,n))}).catch(()=>{}),b}function o(t,{blocked:o}={}){const s=indexedDB.deleteDatabase(t);return o&&s.addEventListener('blocked',n=>o(n.oldVersion,n)),(0,n.w)(s).then(()=>{})}const s=['get','getKey','getAll','getAllKeys','count'],c=['put','add','delete','clear'],u=new Map;function l(n,t){if(!(n instanceof IDBDatabase)||t in n||'string'!=typeof t)return;if(u.get(t))return u.get(t);const o=t.replace(/FromIndex$/,''),l=t!==o,f=c.includes(o);if(!(o in(l?IDBIndex:IDBObjectStore).prototype)||!f&&!s.includes(o))return;const b=async function(n,...t){const s=this.transaction(n,f?'readwrite':'readonly');let c=s.store;return l&&(c=c.index(t.shift())),(await Promise.all([c[o](...t),f&&s.done]))[0]};return u.set(t,b),b}(0,n.r)(n=>({...n,get:(t,o,s)=>l(t,o)||n.get(t,o,s),has:(t,o)=>!!l(t,o)||n.has(t,o)}))});","lineCount":1,"map":[[1,90,2,0,"Object"],[1,97,2,0,"defineProperty"],[1,112,2,0,"e"],[1,114,2,0],[1,124,2,0,"enumerable"],[1,136,2,0],[1,138,2,0,"get"],[1,142,2,0],[1,160,2,0,"_wrapIdbValueJs"],[1,162,2,0,"u"],[1,163,2,0],[1,167,2,0,"Object"],[1,174,2,0,"defineProperty"],[1,189,2,0,"e"],[1,191,2,0],[1,199,2,0,"enumerable"],[1,211,2,0],[1,213,2,0,"get"],[1,217,2,0],[1,235,2,0,"_wrapIdbValueJs"],[1,237,2,0,"w"],[1,238,2,0],[1,242,95,0,"Object"],[1,249,95,0,"defineProperty"],[1,264,95,0,"e"],[1,266,95,0],[1,278,95,0,"enumerable"],[1,290,95,0],[1,292,95,0,"get"],[1,296,95,0],[1,314,95,9,"deleteDB"],[1,315,95,17],[1,319,95,0,"Object"],[1,326,95,0,"defineProperty"],[1,341,95,0,"e"],[1,343,95,0],[1,353,95,0,"enumerable"],[1,365,95,0],[1,367,95,0,"get"],[1,371,95,0],[1,389,95,19,"openDB"],[1,390,95,25],[1,394,1,0],[1,398,1,0,"_wrapIdbValueJs"],[1,400,1,0,"r"],[1,402,1,0,"d"],[1,404,1,0],[1,408,11,0],[1,417,11,9,"openDB"],[1,419,11,16,"name"],[1,421,11,22,"version"],[1,424,11,31,"blocked"],[1,432,11,33,"blocked"],[1,434,11,40,"upgrade"],[1,442,11,42,"upgrade"],[1,444,11,49,"blocking"],[1,453,11,51,"blocking"],[1,455,11,59,"terminated"],[1,466,11,61,"terminated"],[1,469,11,76],[1,470,11,77],[1,473,12,4],[1,479,12,10,"request"],[1,481,12,20,"indexedDB"],[1,491,12,30,"open"],[1,496,12,35,"name"],[1,498,12,41,"version"],[1,501,13,10,"openPromise"],[1,504,13,24],[1,506,13,24,"wrap"],[1,508,13,28,"w"],[1,511,13,29,"request"],[1,514,33,4],[1,521,14,8,"upgrade"],[1,524,15,8,"request"],[1,526,15,16,"addEventListener"],[1,543,15,33],[1,559,15,51,"event"],[1,563,16,12,"upgrade"],[1,566,16,20],[1,568,16,20,"wrap"],[1,570,16,24,"w"],[1,573,16,25,"request"],[1,575,16,33,"result"],[1,583,16,42,"event"],[1,585,16,48,"oldVersion"],[1,596,16,60,"event"],[1,598,16,66,"newVersion"],[1,610,16,78],[1,612,16,78,"wrap"],[1,614,16,82,"w"],[1,617,16,83,"request"],[1,619,16,91,"transaction"],[1,632,16,105,"event"],[1,637,19,8,"blocked"],[1,640,20,8,"request"],[1,642,20,16,"addEventListener"],[1,659,20,33],[1,669,20,45,"event"],[1,672,20,55,"blocked"],[1,674,22,8,"event"],[1,676,22,14,"oldVersion"],[1,687,22,26,"event"],[1,689,22,32,"newVersion"],[1,700,22,44,"event"],[1,704,24,4,"openPromise"],[1,706,25,9,"then"],[1,711,25,15,"db"],[1,715,26,12,"terminated"],[1,718,27,12,"db"],[1,720,27,15,"addEventListener"],[1,737,27,32],[1,745,27,41],[1,749,27,47,"terminated"],[1,754,28,12,"blocking"],[1,757,29,12,"db"],[1,759,29,15,"addEventListener"],[1,776,29,32],[1,792,29,50,"event"],[1,795,29,60,"blocking"],[1,797,29,69,"event"],[1,799,29,75,"oldVersion"],[1,810,29,87,"event"],[1,812,29,93,"newVersion"],[1,823,29,105,"event"],[1,829,32,9,"catch"],[1,835,32,15],[1,843,33,11,"openPromise"],[1,844,34,0],[1,845,40,0],[1,854,40,9,"deleteDB"],[1,856,40,18,"name"],[1,859,40,24,"blocked"],[1,867,40,26,"blocked"],[1,870,40,38],[1,871,40,39],[1,874,41,4],[1,880,41,10,"request"],[1,882,41,20,"indexedDB"],[1,892,41,30,"deleteDatabase"],[1,907,41,45,"name"],[1,910,47,4],[1,917,42,8,"blocked"],[1,920,43,8,"request"],[1,922,43,16,"addEventListener"],[1,939,43,33],[1,949,43,45,"event"],[1,952,43,55,"blocked"],[1,954,45,8,"event"],[1,956,45,14,"oldVersion"],[1,967,45,26,"event"],[1,972,47,11],[1,974,47,11,"wrap"],[1,976,47,15,"w"],[1,979,47,16,"request"],[1,982,47,25,"then"],[1,987,47,30],[1,994,48,0],[1,995,50,0],[1,1001,50,6,"readMethods"],[1,1003,50,20],[1,1004,50,21],[1,1010,50,28],[1,1019,50,38],[1,1028,50,48],[1,1041,50,62],[1,1050,51,6,"writeMethods"],[1,1052,51,21],[1,1053,51,22],[1,1059,51,29],[1,1065,51,36],[1,1074,51,46],[1,1083,52,6,"cachedMethods"],[1,1085,52,22],[1,1089,52,26,"Map"],[1,1093,53,0],[1,1102,53,9,"getMethod"],[1,1104,53,19,"target"],[1,1106,53,27,"prop"],[1,1109,54,4],[1,1114,54,10,"target"],[1,1127,54,28,"IDBDatabase"],[1,1141,55,10,"prop"],[1,1146,55,18,"target"],[1,1149,56,24],[1,1166,56,15,"prop"],[1,1168,57,8],[1,1175,59,4],[1,1178,59,8,"cachedMethods"],[1,1180,59,22,"get"],[1,1184,59,26,"prop"],[1,1187,60,8],[1,1194,60,15,"cachedMethods"],[1,1196,60,29,"get"],[1,1200,60,33,"prop"],[1,1203,61,4],[1,1209,61,10,"targetFuncName"],[1,1211,61,27,"prop"],[1,1213,61,32,"replace"],[1,1221,61,40],[1,1234,61,54],[1,1238,62,10,"useIndex"],[1,1240,62,21,"prop"],[1,1244,62,30,"targetFuncName"],[1,1246,63,10,"isWrite"],[1,1248,63,20,"writeMethods"],[1,1250,63,33,"includes"],[1,1259,63,42,"targetFuncName"],[1,1262,64,4],[1,1267,66,6,"targetFuncName"],[1,1272,66,25,"useIndex"],[1,1274,66,36,"IDBIndex"],[1,1283,66,47,"IDBObjectStore"],[1,1299,66,63,"prototype"],[1,1312,67,10,"isWrite"],[1,1316,67,21,"readMethods"],[1,1318,67,33,"includes"],[1,1327,67,42,"targetFuncName"],[1,1330,68,8],[1,1337,70,4],[1,1343,70,10,"method"],[1,1345,70,19,"async"],[1,1360,70,35,"storeName"],[1,1365,70,49,"args"],[1,1368,72,8],[1,1374,72,14,"tx"],[1,1376,72,19,"this"],[1,1381,72,24,"transaction"],[1,1393,72,36,"storeName"],[1,1395,72,47,"isWrite"],[1,1397,72,57],[1,1409,72,71],[1,1421,73,8],[1,1425,73,12,"target"],[1,1427,73,21,"tx"],[1,1429,73,24,"store"],[1,1435,81,8],[1,1442,74,12,"useIndex"],[1,1446,75,12,"target"],[1,1448,75,21,"target"],[1,1450,75,28,"index"],[1,1456,75,34,"args"],[1,1458,75,39,"shift"],[1,1475,81,22,"Promise"],[1,1483,81,30,"all"],[1,1487,81,34],[1,1488,82,12,"target"],[1,1490,82,19,"targetFuncName"],[1,1496,82,38,"args"],[1,1499,83,12,"isWrite"],[1,1502,83,23,"tx"],[1,1504,83,26,"done"],[1,1512,84,12],[1,1514,85,4],[1,1516,87,4],[1,1523,86,4,"cachedMethods"],[1,1525,86,18,"set"],[1,1529,86,22,"prop"],[1,1531,86,28,"method"],[1,1534,87,11,"method"],[1,1535,88,0],[1,1537,89,0],[1,1539,89,0,"replaceTraps"],[1,1541,89,12,"r"],[1,1544,89,14,"oldTraps"],[1,1548,89,22],[1,1552,90,7,"oldTraps"],[1,1554,91,4,"get"],[1,1558,91,9,"get"],[1,1559,91,10,"target"],[1,1561,91,18,"prop"],[1,1563,91,24,"receiver"],[1,1567,91,37,"getMethod"],[1,1569,91,47,"target"],[1,1571,91,55,"prop"],[1,1575,91,64,"oldTraps"],[1,1577,91,73,"get"],[1,1581,91,77,"target"],[1,1583,91,85,"prop"],[1,1585,91,91,"receiver"],[1,1588,92,4,"has"],[1,1592,92,9,"has"],[1,1593,92,10,"target"],[1,1595,92,18,"prop"],[1,1601,92,29,"getMethod"],[1,1603,92,39,"target"],[1,1605,92,47,"prop"],[1,1609,92,56,"oldTraps"],[1,1611,92,65,"has"],[1,1615,92,69,"target"],[1,1617,92,77,"prop"],[1,1622,93,4],[1,1625]],"functionMap":{"names":["<global>","openDB","request.addEventListener$argument_1","openPromise.then$argument_0","db.addEventListener$argument_1","openPromise.then._catch$argument_0","deleteDB","wrap.then$argument_0","getMethod","method","replaceTraps$argument_0","get","has"],"mappings":"AAA;ACU;kDCI;SDE;4CCG;kDDE;cEG;yCCE,kBD;iDCE,8DD;KFE;eIC,SJ;CDE;AMM;4CJG;gCIE;8BCE,eD;CNC;AQK;mBCiB;KDe;CRG;aUC;SCE,2FD;SEC,yEF;EVC"},"hasCjsExports":false},"type":"js/module"}]}